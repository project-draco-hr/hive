{
  try {
    File[] logDirs=mLogDir.listFiles();
    if (logDirs != null && logDirs.length > 0) {
      Map<String,ProfileLogs> profiles=Maps.newHashMap();
      for (      File logDir : logDirs) {
        String name=logDir.getName();
        if (name.contains("-")) {
          String profile=name.substring(0,name.lastIndexOf("-"));
          ProfileLogs logs=profiles.get(profile);
          if (logs == null) {
            logs=new ProfileLogs(profile);
            profiles.put(profile,logs);
          }
          logs.dirs.add(logDir);
        }
      }
      for (      String profile : profiles.keySet()) {
        ProfileLogs logs=profiles.get(profile);
        if (logs.dirs.size() > mMaxDirectoriesPerProfile) {
          File oldest=logs.getOldest();
          LOG.info("Deleting " + oldest + " from "+ logs.dirs);
          FileUtils.deleteQuietly(oldest);
        }
      }
    }
  }
 catch (  Throwable t) {
    LOG.error("Unexpected error cleaning " + mLogDir,t);
  }
}
