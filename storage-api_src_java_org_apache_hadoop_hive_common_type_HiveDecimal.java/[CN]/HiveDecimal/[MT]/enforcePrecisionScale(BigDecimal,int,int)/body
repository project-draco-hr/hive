{
  if (bd == null) {
    return null;
  }
  bd=trim(bd);
  if (bd.scale() > maxScale) {
    bd=bd.setScale(maxScale,RoundingMode.HALF_UP);
  }
  int maxIntDigits=maxPrecision - maxScale;
  int intDigits=bd.precision() - bd.scale();
  if (intDigits > maxIntDigits) {
    return null;
  }
  return bd;
}
