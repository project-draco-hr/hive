{
  HiveConf hconf=new HiveConf();
  assertTrue("default value of hive server2 doAs should be true",hconf.getBoolVar(ConfVars.HIVE_SERVER2_ENABLE_DOAS));
  hconf.setVar(ConfVars.HIVE_SERVER2_AUTHENTICATION,HiveAuthFactory.AuthTypes.KERBEROS.toString());
  CLIService cliService=new CLIService();
  cliService.init(hconf);
  ThriftCLIService tcliService=new ThriftBinaryCLIService(cliService);
  TOpenSessionReq req=new TOpenSessionReq();
  req.setUsername("testuser1");
  SessionHandle sHandle=tcliService.getSessionHandle(req);
  SessionManager sManager=getSessionManager(cliService.getServices());
  HiveSession session=sManager.getSession(sHandle);
  assertTrue("check if session class is a proxy",session instanceof java.lang.reflect.Proxy);
}
