{
  try {
    final String sample="127.0.0.1 - frank [10/Oct/2000:13:55:36 -0700] \"GET /apache_pb.gif HTTP/1.0\" 200 2326";
    TMemoryBuffer trans=new TMemoryBuffer(4096);
    trans.write(sample.getBytes(),0,sample.getBytes().length);
    trans.flush();
    TCTLSeparatedProtocol prot=new TCTLSeparatedProtocol(trans,4096);
    Properties schema=new Properties();
    schema.setProperty(Constants.QUOTE_CHAR,"(\"|\\[|\\])");
    schema.setProperty(Constants.FIELD_DELIM," ");
    schema.setProperty(Constants.SERIALIZATION_NULL_FORMAT,"-");
    prot.initialize(new Configuration(),schema);
    prot.readStructBegin();
    prot.readFieldBegin();
    final String ip=prot.readString();
    prot.readFieldEnd();
    assertEquals("127.0.0.1",ip);
    prot.readFieldBegin();
    final String identd=prot.readString();
    prot.readFieldEnd();
    assertEquals("",identd);
    prot.readFieldBegin();
    final String user=prot.readString();
    prot.readFieldEnd();
    assertEquals("frank",user);
    prot.readFieldBegin();
    final String finishTime=prot.readString();
    prot.readFieldEnd();
    assertEquals("10/Oct/2000:13:55:36 -0700",finishTime);
    prot.readFieldBegin();
    final String requestLine=prot.readString();
    prot.readFieldEnd();
    assertEquals("GET /apache_pb.gif HTTP/1.0",requestLine);
    prot.readFieldBegin();
    final int returnCode=prot.readI32();
    prot.readFieldEnd();
    assertEquals(200,returnCode);
    prot.readFieldBegin();
    final int returnSize=prot.readI32();
    prot.readFieldEnd();
    assertEquals(2326,returnSize);
    prot.readStructEnd();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
