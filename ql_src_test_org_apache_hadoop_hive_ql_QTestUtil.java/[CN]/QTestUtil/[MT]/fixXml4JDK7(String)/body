{
  String version=System.getProperty("java.version");
  if (!version.startsWith("1.7")) {
    return;
  }
  BufferedReader in=new BufferedReader(new FileReader(fname));
  BufferedWriter out=new BufferedWriter(new FileWriter(fname + ".orig"));
  String line=null;
  while (null != (line=in.readLine())) {
    out.write(line);
    out.write('\n');
  }
  in.close();
  out.close();
  in=new BufferedReader(new FileReader(fname + ".orig"));
  out=new BufferedWriter(new FileWriter(fname));
  while (null != (line=in.readLine())) {
    if (line.indexOf("<object ") == -1 || line.indexOf("class=") == -1) {
      out.write(line);
    }
 else {
      StringBuilder sb=new StringBuilder();
      String prefix=line.substring(0,line.indexOf("<object") + 7);
      sb.append(prefix);
      String postfix=line.substring(line.lastIndexOf('"') + 1);
      String id=getPropertyValue(line,"id");
      if (id != null)       sb.append(" id=" + id);
      String cls=getPropertyValue(line,"class");
      assert(cls != null);
      if (cls.equals("\"java.lang.Enum\"")) {
        line=in.readLine();
        cls="\"" + getElementValue(line,"class") + "\"";
        sb.append(" class=" + cls + " method=\"valueOf\"");
      }
 else {
        sb.append(" class=" + cls);
      }
      sb.append(postfix);
      out.write(sb.toString());
    }
    out.write('\n');
  }
  in.close();
  out.close();
}
