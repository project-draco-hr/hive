{
  Rule rule=null;
  int minCost=Integer.MAX_VALUE;
  for (  Rule r : procRules.keySet()) {
    int cost=r.cost(ndStack);
    if ((cost >= 0) && (cost <= minCost)) {
      minCost=cost;
      rule=r;
    }
  }
  NodeProcessor proc;
  if (rule == null)   proc=defaultProc;
 else   proc=procRules.get(rule);
  if (proc != null) {
    return proc.process(nd,procCtx,nodeOutputs);
  }
 else   return null;
}
