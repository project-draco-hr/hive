{
  Date d2=Utils.toDate(s);
  if (d1 == null) {
    return d2;
  }
 else   if (d2 == null) {
    return d1;
  }
  if ((max && d1.before(d2)) || (!max && d1.after(d2))) {
    return d2;
  }
  return d1;
}
