{
  if (ShimLoader.getHadoopShims().isSecurityEnabled()) {
    String principal=hiveConf.getVar(ConfVars.HIVE_SERVER2_KERBEROS_PRINCIPAL);
    if (principal.isEmpty()) {
      throw new IOException("HiveServer2 Kerberos principal is empty");
    }
    String keyTabFile=hiveConf.getVar(ConfVars.HIVE_SERVER2_KERBEROS_KEYTAB);
    if (keyTabFile.isEmpty()) {
      throw new IOException("HiveServer2 Kerberos keytab is empty");
    }
    ShimLoader.getHadoopShims().setZookeeperClientKerberosJaasConfig(principal,keyTabFile);
    nodeAcls.addAll(Ids.READ_ACL_UNSAFE);
    nodeAcls.add(new ACL(Perms.ALL,Ids.AUTH_IDS));
  }
 else {
    nodeAcls.addAll(Ids.OPEN_ACL_UNSAFE);
  }
}
