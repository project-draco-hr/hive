{
  cliService=new CLIService();
  addService(cliService);
  if (isHTTPTransportMode(hiveConf)) {
    thriftCLIService=new ThriftHttpCLIService(cliService);
  }
 else {
    thriftCLIService=new ThriftBinaryCLIService(cliService);
  }
  addService(thriftCLIService);
  thriftCLIService.setHiveServer2(this);
  super.init(hiveConf);
  final HiveServer2 hiveServer2=this;
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      hiveServer2.stop();
    }
  }
);
}
