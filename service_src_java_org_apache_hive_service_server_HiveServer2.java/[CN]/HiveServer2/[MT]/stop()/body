{
  super.stop();
  HiveConf hiveConf=this.getHiveConf();
  if (hiveConf.getBoolVar(ConfVars.HIVE_SERVER2_TEZ_INITIALIZE_DEFAULT_SESSIONS)) {
    try {
      TezSessionPoolManager.getInstance().stop();
    }
 catch (    Exception e) {
      LOG.error("Tez session pool manager stop had an error during stop of hive server");
      e.printStackTrace();
    }
  }
  if (hiveConf.getVar(ConfVars.HIVE_EXECUTION_ENGINE).equals("spark")) {
    try {
      SparkSessionManagerImpl.getInstance().shutdown();
    }
 catch (    Exception ex) {
      LOG.error("Spark session pool manager failed to stop during HiveServer2 shutdown.",ex);
    }
  }
}
