{
  if (initialized) {
    for (int i=0; i < prjColIDs.length; ++i) {
      int fieldIndex=prjColIDs[i];
      BytesRefWritable passedInField=cols.unCheckedGet(fieldIndex);
      cachedByteArrayRef[fieldIndex].setData(passedInField.getData());
      fields[fieldIndex].init(cachedByteArrayRef[fieldIndex],passedInField.getStart(),passedInField.getLength());
    }
  }
 else {
    int fieldIndex=0;
    int min=cols.size() < fields.length ? cols.size() : fields.length;
    ArrayList<Integer> tmp_sel_cols=new ArrayList<Integer>();
    for (; fieldIndex < min; fieldIndex++) {
      BytesRefWritable passedInField=cols.unCheckedGet(fieldIndex);
      if (passedInField.length > 0) {
        tmp_sel_cols.add(fieldIndex);
        cachedByteArrayRef[fieldIndex].setData(passedInField.getData());
        fields[fieldIndex].init(cachedByteArrayRef[fieldIndex],passedInField.getStart(),passedInField.getLength());
        fieldIsNull[fieldIndex]=false;
      }
 else       fieldIsNull[fieldIndex]=true;
    }
    for (; fieldIndex < fields.length; fieldIndex++)     fieldIsNull[fieldIndex]=true;
    prjColIDs=new int[tmp_sel_cols.size()];
    for (int i=0; i < prjColIDs.length; ++i) {
      prjColIDs[i]=tmp_sel_cols.get(i).intValue();
    }
    initialized=true;
  }
}
