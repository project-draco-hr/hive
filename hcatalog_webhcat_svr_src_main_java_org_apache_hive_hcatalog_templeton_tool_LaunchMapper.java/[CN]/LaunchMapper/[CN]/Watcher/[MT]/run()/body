{
  PrintWriter writer=null;
  try {
    String enc=conf.get(AppConfig.EXEC_ENCODING_NAME);
    InputStreamReader isr=new InputStreamReader(in,enc);
    BufferedReader reader=new BufferedReader(isr);
    writer=new PrintWriter(new OutputStreamWriter(out,enc));
    String line;
    while ((line=reader.readLine()) != null) {
      writer.println(line);
      String percent=TempletonUtils.extractPercentComplete(line);
      String childid=TempletonUtils.extractChildJobId(line);
      updateJobStatePercentAndChildId(conf,jobid.toString(),percent,childid);
    }
    writer.flush();
    if (out != System.err && out != System.out) {
      writer.close();
    }
  }
 catch (  IOException e) {
    LOG.error("templeton: execute error: ",e);
  }
 finally {
    if (needCloseOutput && writer != null) {
      writer.close();
    }
  }
}
