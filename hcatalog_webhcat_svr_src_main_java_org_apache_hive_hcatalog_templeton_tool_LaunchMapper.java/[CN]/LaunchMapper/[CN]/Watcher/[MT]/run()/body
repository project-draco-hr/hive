{
  try {
    InputStreamReader isr=new InputStreamReader(in);
    BufferedReader reader=new BufferedReader(isr);
    PrintWriter writer=new PrintWriter(out);
    String line;
    while ((line=reader.readLine()) != null) {
      writer.println(line);
      JobState state=null;
      try {
        String percent=TempletonUtils.extractPercentComplete(line);
        String childid=TempletonUtils.extractChildJobId(line);
        if (percent != null || childid != null) {
          state=new JobState(jobid.toString(),conf);
          if (percent != null) {
            state.setPercentComplete(percent);
          }
          if (childid != null) {
            JobState childState=new JobState(childid,conf);
            childState.setParent(jobid.toString());
            state.addChild(childid);
            state.close();
          }
        }
      }
 catch (      IOException e) {
        LOG.error("templeton: state error: ",e);
      }
 finally {
        if (state != null) {
          try {
            state.close();
          }
 catch (          IOException e) {
            LOG.warn(e);
          }
        }
      }
    }
    writer.flush();
    if (out != System.err && out != System.out) {
      writer.close();
    }
  }
 catch (  IOException e) {
    LOG.error("templeton: execute error: ",e);
  }
}
