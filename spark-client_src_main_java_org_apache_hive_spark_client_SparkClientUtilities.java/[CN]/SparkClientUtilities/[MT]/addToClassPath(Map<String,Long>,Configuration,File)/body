{
  URLClassLoader loader=(URLClassLoader)Thread.currentThread().getContextClassLoader();
  List<URL> curPath=Lists.newArrayList(loader.getURLs());
  List<String> localNewPaths=new ArrayList<>();
  boolean newPathAdded=false;
  for (  Map.Entry<String,Long> entry : newPaths.entrySet()) {
    URL newUrl=urlFromPathString(entry.getKey(),entry.getValue(),conf,localTmpDir);
    localNewPaths.add(newUrl.toString());
    if (newUrl != null && !curPath.contains(newUrl)) {
      curPath.add(newUrl);
      LOG.info("Added jar[" + newUrl + "] to classpath.");
      newPathAdded=true;
    }
  }
  if (newPathAdded) {
    URLClassLoader newLoader=new URLClassLoader(curPath.toArray(new URL[curPath.size()]),loader);
    Thread.currentThread().setContextClassLoader(newLoader);
  }
  return localNewPaths;
}
