{
  if (shutdownInProgress.get()) {
    throw new IllegalStateException("Shutdown in progress, cannot remove a shutdownHook");
  }
  return hooks.remove(new HookEntry(shutdownHook,0));
}
