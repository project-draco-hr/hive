{
  Configuration conf=getConfig();
  try {
    JobTokenSecretManager jobTokenSecretManager=new JobTokenSecretManager();
    jobTokenSecretManager.addTokenForJob(tokenIdentifier,sessionToken);
    server=new RPC.Builder(conf).setProtocol(LlapTaskUmbilicalProtocol.class).setBindAddress("0.0.0.0").setPort(0).setInstance(umbilical).setNumHandlers(conf.getInt(TezConfiguration.TEZ_AM_TASK_LISTENER_THREAD_COUNT,TezConfiguration.TEZ_AM_TASK_LISTENER_THREAD_COUNT_DEFAULT)).setSecretManager(jobTokenSecretManager).build();
    server.start();
    this.address=NetUtils.getConnectAddress(server);
    LOG.info("Started LlapUmbilical: " + umbilical.getClass().getName() + " at address: "+ address);
  }
 catch (  IOException e) {
    throw new TezUncheckedException(e);
  }
}
