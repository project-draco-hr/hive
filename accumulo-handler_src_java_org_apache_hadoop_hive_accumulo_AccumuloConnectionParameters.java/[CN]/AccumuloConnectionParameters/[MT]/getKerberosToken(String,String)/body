{
  Class<? extends AuthenticationToken> krbTokenClz=getKerberosTokenClass();
  File keytabFile=new File(keytab);
  if (!keytabFile.isFile() || !keytabFile.canRead()) {
    throw new IllegalArgumentException("Keytab must be a readable file: " + keytab);
  }
  try {
    Constructor<? extends AuthenticationToken> constructor=krbTokenClz.getConstructor(String.class,File.class,boolean.class);
    return constructor.newInstance(username,keytabFile,true);
  }
 catch (  NoSuchMethodException|SecurityException|InstantiationException|IllegalArgumentException|InvocationTargetException|IllegalAccessException e) {
    throw new IllegalArgumentException("Failed to instantiate KerberosToken.",e);
  }
}
