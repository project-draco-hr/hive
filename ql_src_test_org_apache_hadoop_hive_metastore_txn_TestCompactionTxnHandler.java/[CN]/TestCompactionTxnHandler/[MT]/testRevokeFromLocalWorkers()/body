{
  CompactionRequest rqst=new CompactionRequest("foo","bar",CompactionType.MINOR);
  txnHandler.compact(rqst);
  rqst=new CompactionRequest("foo","baz",CompactionType.MINOR);
  txnHandler.compact(rqst);
  rqst=new CompactionRequest("foo","bazzoo",CompactionType.MINOR);
  txnHandler.compact(rqst);
  assertNotNull(txnHandler.findNextToCompact("fred-193892"));
  assertNotNull(txnHandler.findNextToCompact("bob-193892"));
  assertNotNull(txnHandler.findNextToCompact("fred-193893"));
  txnHandler.revokeFromLocalWorkers("fred");
  ShowCompactResponse rsp=txnHandler.showCompact(new ShowCompactRequest());
  List<ShowCompactResponseElement> compacts=rsp.getCompacts();
  assertEquals(3,compacts.size());
  boolean sawWorkingBob=false;
  int initiatedCount=0;
  for (  ShowCompactResponseElement c : compacts) {
    if (c.getState().equals("working")) {
      assertEquals("bob-193892",c.getWorkerid());
      sawWorkingBob=true;
    }
 else     if (c.getState().equals("initiated")) {
      initiatedCount++;
    }
 else {
      fail("Unexpected state");
    }
  }
  assertTrue(sawWorkingBob);
  assertEquals(2,initiatedCount);
}
