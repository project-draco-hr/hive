{
  LowLevelCacheImpl cache=new LowLevelCacheImpl(LlapDaemonCacheMetrics.create("test","1"),new DummyCachePolicy(),new DummyAllocator(),true,-1);
  long fn1=1, fn2=2;
  LlapMemoryBuffer[] fakes=new LlapMemoryBuffer[]{fb(),fb(),fb(),fb(),fb(),fb(),fb(),fb(),fb()};
  assertNull(cache.putFileData(fn1,drs(1,2,3),fbs(fakes,0,1,2),0,Priority.NORMAL));
  assertNull(cache.putFileData(fn2,drs(1),fbs(fakes,3),0,Priority.NORMAL));
  evict(cache,fakes[0]);
  evict(cache,fakes[3]);
  long[] mask=cache.putFileData(fn1,drs(1,2,3,4),fbs(fakes,4,5,6,7),0,Priority.NORMAL);
  assertEquals(1,mask.length);
  assertEquals(6,mask[0]);
  assertNull(cache.putFileData(fn2,drs(1),fbs(fakes,8),0,Priority.NORMAL));
  verifyCacheGet(cache,fn1,1,5,fakes[4],fakes[1],fakes[2],fakes[7]);
}
