{
  while (true) {
    try {
      assumeSubject=JdbcConnectionParams.AUTH_KERBEROS_AUTH_TYPE_FROM_SUBJECT.equals(sessConfMap.get(JdbcConnectionParams.AUTH_KERBEROS_AUTH_TYPE));
      transport=isHttpTransportMode() ? createHttpTransport() : createBinaryTransport();
      if (!transport.isOpen()) {
        LOG.info("Will try to open client transport with JDBC Uri: " + jdbcUriString);
        transport.open();
      }
      break;
    }
 catch (    TTransportException e) {
      LOG.info("Could not open client transport with JDBC Uri: " + jdbcUriString);
      if ((sessConfMap.get(JdbcConnectionParams.SERVICE_DISCOVERY_MODE) != null) && (JdbcConnectionParams.SERVICE_DISCOVERY_MODE_ZOOKEEPER.equalsIgnoreCase(sessConfMap.get(JdbcConnectionParams.SERVICE_DISCOVERY_MODE)))) {
        try {
          Utils.updateConnParamsFromZooKeeper(connParams);
        }
 catch (        ZooKeeperHiveClientException ze) {
          throw new SQLException("Could not open client transport for any of the Server URI's in ZooKeeper: " + ze.getMessage()," 08S01",ze);
        }
        jdbcUriString=connParams.getJdbcUriString();
        host=connParams.getHost();
        port=connParams.getPort();
        LOG.info("Will retry opening client transport");
      }
 else {
        LOG.info("Transport Used for JDBC connection: " + sessConfMap.get(JdbcConnectionParams.TRANSPORT_MODE));
        throw new SQLException("Could not open client transport with JDBC Uri: " + jdbcUriString + ": "+ e.getMessage()," 08S01",e);
      }
    }
  }
}
