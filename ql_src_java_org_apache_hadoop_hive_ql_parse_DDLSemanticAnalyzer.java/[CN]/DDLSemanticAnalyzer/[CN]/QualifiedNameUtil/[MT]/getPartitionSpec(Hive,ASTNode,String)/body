{
  ASTNode partNode=null;
  if (ast.getChildCount() == 1) {
    return null;
  }
  if (ast.getChildCount() > 2 && (((ASTNode)ast.getChild(1)).getType() != HiveParser.TOK_PARTSPEC)) {
    throw new SemanticException(((ASTNode)ast.getChild(1)).getType() + " is not a partition specification");
  }
  if (((ASTNode)ast.getChild(1)).getType() == HiveParser.TOK_PARTSPEC) {
    partNode=(ASTNode)ast.getChild(1);
  }
  if (partNode != null) {
    Table tab=null;
    try {
      tab=db.getTable(tableName);
    }
 catch (    InvalidTableException e) {
      throw new SemanticException(ErrorMsg.INVALID_TABLE.getMsg(tableName),e);
    }
catch (    HiveException e) {
      throw new SemanticException(e.getMessage(),e);
    }
    HashMap<String,String> partSpec=null;
    try {
      partSpec=getValidatedPartSpec(tab,partNode,db.getConf(),false);
    }
 catch (    SemanticException e) {
      return null;
    }
    if (partSpec != null) {
      Partition part=null;
      try {
        part=db.getPartition(tab,partSpec,false);
      }
 catch (      HiveException e) {
        return null;
      }
      if (part == null) {
        throw new SemanticException(ErrorMsg.INVALID_PARTITION.getMsg(partSpec.toString()));
      }
      return partSpec;
    }
  }
  return null;
}
