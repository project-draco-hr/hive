{
  MockResultCollection resultCollection=MockResultCollection.create().addSearchResultWithDns("1").addSearchResultWithDns("2","3");
  handler=new SearchResultHandler(resultCollection);
  List<String> expected=Arrays.asList("1","2");
  final List<String> actual=new ArrayList<>();
  handler.handle(new SearchResultHandler.RecordProcessor(){
    @Override public boolean process(    SearchResult record) throws NamingException {
      actual.add(record.getNameInNamespace());
      return actual.size() < 2;
    }
  }
);
  assertEquals(expected,actual);
  assertAllNamingEnumerationsClosed(resultCollection);
}
