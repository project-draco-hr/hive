{
  MockResultCollection resultCollection=MockResultCollection.create().addSearchResultWithDns("1").addSearchResultWithDns("2");
  doThrow(NamingException.class).when(resultCollection.iterator().next()).close();
  handler=new SearchResultHandler(resultCollection);
  List<String> actual=handler.getAllLdapNames();
  assertEquals("Resultset size",2,actual.size());
  assertAllNamingEnumerationsClosed(resultCollection);
}
