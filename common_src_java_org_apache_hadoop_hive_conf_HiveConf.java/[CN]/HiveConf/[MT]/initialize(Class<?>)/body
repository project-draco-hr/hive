{
  hiveJar=(new JobConf(cls)).getJar();
  origProp=getAllProperties();
  addResource(getConfVarURL());
  if (hiveSiteURL != null) {
    addResource(hiveSiteURL);
  }
  URL hadoopconfurl=getClassLoader().getResource("core-site.xml");
  if (hadoopconfurl != null) {
    String conffile=hadoopconfurl.getPath();
    this.setVar(ConfVars.HADOOPCONF,conffile.substring(0,conffile.lastIndexOf('/')));
  }
  applySystemProperties();
  if (hiveJar == null) {
    hiveJar=this.get(ConfVars.HIVEJAR.varname);
  }
  if (auxJars == null) {
    auxJars=this.get(ConfVars.HIVEAUXJARS.varname);
  }
}
