{
  URL result=classLoader.getResource(name);
  if (result == null) {
    String confPath=System.getenv("HIVE_CONF_DIR");
    result=checkConfigFile(new File(confPath,name));
    if (result == null) {
      String homePath=System.getenv("HIVE_HOME");
      String nameInConf="conf" + File.pathSeparator + name;
      result=checkConfigFile(new File(homePath,nameInConf));
      if (result == null) {
        URI jarUri=null;
        try {
          jarUri=HiveConf.class.getProtectionDomain().getCodeSource().getLocation().toURI();
        }
 catch (        Throwable e) {
          if (l4j.isInfoEnabled()) {
            l4j.info("Cannot get jar URI",e);
          }
          System.err.println("Cannot get jar URI: " + e.getMessage());
        }
        result=checkConfigFile(new File(new File(jarUri).getParentFile(),nameInConf));
      }
    }
  }
  if (doLog && l4j.isInfoEnabled()) {
    l4j.info("Found configuration file " + result);
  }
  return result;
}
