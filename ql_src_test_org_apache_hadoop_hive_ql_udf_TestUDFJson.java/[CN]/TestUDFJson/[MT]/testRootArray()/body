{
  UDFJson udf=new UDFJson();
  runTest("[1,2,3]","$[0]","1",udf);
  runTest("[1,2,3]","$.[0]","1",udf);
  runTest("[1,2,3]","$.[1]","2",udf);
  runTest("[1,2,3]","$[1]","2",udf);
  runTest("[1,2,3]","$[3]",null,udf);
  runTest("[1,2,3]","$.[*]","[1,2,3]",udf);
  runTest("[1,2,3]","$[*]","[1,2,3]",udf);
  runTest("[1,2,3]","$","[1,2,3]",udf);
  runTest("[{\"k1\":\"v1\"},{\"k2\":\"v2\"},{\"k3\":\"v3\"}]","$[2]","{\"k3\":\"v3\"}",udf);
  runTest("[{\"k1\":\"v1\"},{\"k2\":\"v2\"},{\"k3\":\"v3\"}]","$[2].k3","v3",udf);
  runTest("[{\"k1\":[{\"k11\":[1,2,3]}]}]","$[0].k1[0].k11[1]","2",udf);
  runTest("[{\"k1\":[{\"k11\":[1,2,3]}]}]","$[0].k1[0].k11","[1,2,3]",udf);
  runTest("[{\"k1\":[{\"k11\":[1,2,3]}]}]","$[0].k1[0]","{\"k11\":[1,2,3]}",udf);
  runTest("[{\"k1\":[{\"k11\":[1,2,3]}]}]","$[0].k1","[{\"k11\":[1,2,3]}]",udf);
  runTest("[{\"k1\":[{\"k11\":[1,2,3]}]}]","$[0]","{\"k1\":[{\"k11\":[1,2,3]}]}",udf);
  runTest("[[1,2,3],[4,5,6],[7,8,9]]","$[1]","[4,5,6]",udf);
  runTest("[[1,2,3],[4,5,6],[7,8,9]]","$[1][0]","4",udf);
  runTest("[\"a\",\"b\"]","$[1]","b",udf);
  runTest("[[\"a\",\"b\"]]","$[0][1]","b",udf);
  runTest("[1,2,3]","[0]",null,udf);
  runTest("[1,2,3]","$0",null,udf);
  runTest("[1,2,3]","0",null,udf);
  runTest("[1,2,3]","$.",null,udf);
  runTest("[1,2,3]","$","[1,2,3]",udf);
  runTest("{\"a\":4}","$","{\"a\":4}",udf);
}
