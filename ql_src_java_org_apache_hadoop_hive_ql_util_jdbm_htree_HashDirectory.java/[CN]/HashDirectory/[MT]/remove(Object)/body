{
  int hash=hashCode(key);
  long child_recid=_children[hash];
  if (child_recid == 0) {
    return null;
  }
 else {
    HashNode node=(HashNode)_recman.fetch(child_recid);
    if (node instanceof HashDirectory) {
      HashDirectory dir=(HashDirectory)node;
      dir.setPersistenceContext(_recman,child_recid);
      Object existing=dir.remove(key);
      if (existing != null) {
        if (dir.isEmpty()) {
          _recman.delete(child_recid);
          _children[hash]=0;
          _recman.update(_recid,this);
        }
      }
      return existing;
    }
 else {
      HashBucket bucket=(HashBucket)node;
      Object existing=bucket.removeElement(key);
      if (existing != null) {
        if (bucket.getElementCount() >= 1) {
          _recman.update(child_recid,bucket);
        }
 else {
          _recman.delete(child_recid);
          _children[hash]=0;
          _recman.update(_recid,this);
        }
      }
      return existing;
    }
  }
}
