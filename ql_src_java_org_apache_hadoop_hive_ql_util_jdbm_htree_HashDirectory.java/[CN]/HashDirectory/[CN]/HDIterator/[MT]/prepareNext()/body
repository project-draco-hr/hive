{
  long child_recid=0;
  do {
    _child++;
    if (_child >= MAX_CHILDREN) {
      if (_dirStack.isEmpty()) {
        return;
      }
      _dir=(HashDirectory)_dirStack.remove(_dirStack.size() - 1);
      _child=((Integer)_childStack.remove(_childStack.size() - 1)).intValue();
      continue;
    }
    child_recid=_dir._children[_child];
  }
 while (child_recid == 0);
  if (child_recid == 0) {
    throw new Error("child_recid cannot be 0");
  }
  HashNode node=(HashNode)_recman.fetch(child_recid);
  if (node instanceof HashDirectory) {
    _dirStack.add(_dir);
    _childStack.add(new Integer(_child));
    _dir=(HashDirectory)node;
    _child=-1;
    _dir.setPersistenceContext(_recman,child_recid);
    prepareNext();
  }
 else {
    HashBucket bucket=(HashBucket)node;
    if (_iterateKeys) {
      _iter=bucket.getKeys().iterator();
    }
 else {
      _iter=bucket.getValues().iterator();
    }
  }
}
