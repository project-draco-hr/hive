{
  this.conf=conf;
  UserGroupInformation ugi=null;
  String proxyUser=conf.get(PROXY_USER_NAME);
  if (proxyUser == null) {
    super.setConf(conf);
    return;
  }
  try {
    ugi=ShimLoader.getHadoopShims().createRemoteUser(proxyUser,null);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  if (ugi == null) {
    throw new RuntimeException("Can not initialize ProxyUserAuthenticator for user [" + proxyUser + "]");
  }
  this.userName=ShimLoader.getHadoopShims().getShortUserName(ugi);
  if (ugi.getGroupNames() != null) {
    this.groupNames=Arrays.asList(ugi.getGroupNames());
  }
}
