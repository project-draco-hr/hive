{
  final ExpressionTree exprTree=(filter != null && !filter.isEmpty()) ? PartFilterExprUtil.getFilterParser(filter).tree : ExpressionTree.EMPTY_TREE;
  List<Partition> result=new ArrayList<Partition>();
  boolean commit=false;
  openTransaction();
  try {
    getPartitionsByExprInternal(HiveStringUtils.normalizeIdentifier(dbName),HiveStringUtils.normalizeIdentifier(tblName),exprTree,maxParts,result);
    return result;
  }
  finally {
    commitOrRoleBack(commit);
  }
}
