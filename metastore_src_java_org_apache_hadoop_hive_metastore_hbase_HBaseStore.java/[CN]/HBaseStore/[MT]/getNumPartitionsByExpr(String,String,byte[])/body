{
  final ExpressionTree exprTree=PartFilterExprUtil.makeExpressionTree(expressionProxy,expr);
  List<Partition> result=new ArrayList<Partition>();
  boolean commit=false;
  openTransaction();
  try {
    getPartitionsByExprInternal(dbName,tblName,exprTree,Short.MAX_VALUE,result);
    return result.size();
  }
  finally {
    commitOrRoleBack(commit);
  }
}
