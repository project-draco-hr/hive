{
  try {
    PrincipalPrivilegeSet pps=new PrincipalPrivilegeSet();
    Table table=getHBase().getTable(dbName,tableName);
    List<PrivilegeGrantInfo> pgi;
    if (table.getPrivileges() != null) {
      if (table.getPrivileges().getUserPrivileges() != null) {
        pgi=table.getPrivileges().getUserPrivileges().get(userName);
        if (pgi != null) {
          pps.putToUserPrivileges(userName,pgi);
        }
      }
      if (table.getPrivileges().getRolePrivileges() != null) {
        List<String> roles=getHBase().getUserRoles(userName);
        if (roles != null) {
          for (          String role : roles) {
            pgi=table.getPrivileges().getRolePrivileges().get(role);
            if (pgi != null) {
              pps.putToRolePrivileges(role,pgi);
            }
          }
        }
      }
    }
    return pps;
  }
 catch (  IOException e) {
    LOG.error("Unable to get db privileges for user",e);
    throw new MetaException("Unable to get db privileges for user, " + e.getMessage());
  }
}
