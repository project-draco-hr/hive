{
  try {
    Iterator<FileStatus> itr=context.shims.listLocatedStatus(fs,dir,hiddenFileFilter);
    while (itr.hasNext()) {
      FileStatus file=itr.next();
      if (!file.isDir()) {
        context.schedule(new SplitGenerator(context,fs,file));
      }
    }
    context.decrementSchedulers();
  }
 catch (  Throwable th) {
    context.decrementSchedulers();
synchronized (context.errors) {
      context.errors.add(th);
    }
  }
}
