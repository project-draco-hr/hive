{
  close();
  TreeSet blockList=new TreeSet(new BlockIoComparator());
  int numBlocks=0;
  int writtenBlocks=0;
  for (int i=0; i < _maxTxns; i++) {
    if (txns[i] == null)     continue;
    for (Iterator k=txns[i].iterator(); k.hasNext(); ) {
      BlockIo block=(BlockIo)k.next();
      if (blockList.contains(block)) {
        block.decrementTransactionCount();
      }
 else {
        writtenBlocks++;
        boolean result=blockList.add(block);
      }
      numBlocks++;
    }
    txns[i]=null;
  }
  synchronizeBlocks(blockList.iterator(),true);
  owner.sync();
  open();
}
