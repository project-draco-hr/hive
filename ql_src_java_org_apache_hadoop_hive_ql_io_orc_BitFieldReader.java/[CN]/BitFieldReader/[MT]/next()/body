{
  int result=0;
  int bitsLeftToRead=bitSize;
  while (bitsLeftToRead > bitsLeft) {
    result<<=bitsLeft;
    result|=current & ((1 << bitsLeft) - 1);
    bitsLeftToRead-=bitsLeft;
    readByte();
  }
  if (bitsLeftToRead > 0) {
    result<<=bitsLeftToRead;
    bitsLeft-=bitsLeftToRead;
    result|=(current >>> bitsLeft) & ((1 << bitsLeftToRead) - 1);
  }
  return result & mask;
}
