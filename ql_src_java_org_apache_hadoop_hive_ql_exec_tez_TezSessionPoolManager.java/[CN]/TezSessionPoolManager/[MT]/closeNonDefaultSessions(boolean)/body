{
synchronized (openSessions) {
    Iterator<TezSessionState> iter=openSessions.iterator();
    while (iter.hasNext()) {
      System.err.println("Shutting down tez session.");
      TezSessionState sessionState=iter.next();
      closeIfNotDefault(sessionState,keepTmpDir);
      if (sessionState.isDefault() == false) {
        iter.remove();
      }
    }
  }
}
