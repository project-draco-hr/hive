{
  String queueName=conf.get("tez.queue.name");
  boolean nonDefaultUser=conf.getBoolVar(HiveConf.ConfVars.HIVE_SERVER2_ENABLE_DOAS);
  if (forceCreate || !(this.inited) || ((queueName != null) && (!queueName.isEmpty()))|| (nonDefaultUser)|| (defaultQueuePool == null)|| (blockingQueueLength <= 0)) {
    LOG.info("QueueName: " + queueName + " nonDefaultUser: "+ nonDefaultUser+ " defaultQueuePool: "+ defaultQueuePool+ " blockingQueueLength: "+ blockingQueueLength);
    return getNewSessionState(conf,queueName,doOpen);
  }
  LOG.info("Choosing a session from the defaultQueuePool");
  return defaultQueuePool.take();
}
