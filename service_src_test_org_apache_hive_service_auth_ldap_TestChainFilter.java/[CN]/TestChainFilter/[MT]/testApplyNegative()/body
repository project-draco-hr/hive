{
  doThrow(AuthenticationException.class).when(filter3).apply((DirSearch)anyObject(),anyString());
  when(factory1.getInstance(any(HiveConf.class))).thenReturn(filter1);
  when(factory3.getInstance(any(HiveConf.class))).thenReturn(filter3);
  Filter filter=factory.getInstance(conf);
  filter.apply(search,"User");
}
