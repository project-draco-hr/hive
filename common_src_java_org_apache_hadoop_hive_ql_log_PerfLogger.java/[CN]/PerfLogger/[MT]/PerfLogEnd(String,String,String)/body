{
  Long startTime=startTimes.get(method);
  long endTime=System.currentTimeMillis();
  long duration=-1;
  endTimes.put(method,new Long(endTime));
  StringBuilder sb=new StringBuilder("</PERFLOG method=").append(method);
  if (startTime != null) {
    sb.append(" start=").append(startTime);
  }
  sb.append(" end=").append(endTime);
  if (startTime != null) {
    duration=endTime - startTime.longValue();
    sb.append(" duration=").append(duration);
  }
  sb.append(" from=").append(callerName);
  if (additionalInfo != null) {
    sb.append(" ").append(additionalInfo);
  }
  sb.append(">");
  LOG.info(sb.toString());
  endMetrics(method);
  return duration;
}
