{
  Field classLoaderResolverMap;
  Field pmf;
  JDOPersistenceManagerFactory jdoPmf=null;
  NucleusContext nc=null;
  Map<String,ClassLoaderResolver> cMap;
  try {
    pmf=ObjectStore.class.getDeclaredField("pmf");
    if (pmf != null) {
      pmf.setAccessible(true);
      jdoPmf=(JDOPersistenceManagerFactory)pmf.get(null);
      if (jdoPmf != null) {
        nc=jdoPmf.getNucleusContext();
      }
    }
  }
 catch (  Exception e) {
    System.out.println(e);
  }
  if (nc != null) {
    try {
      classLoaderResolverMap=NucleusContext.class.getDeclaredField("classLoaderResolverMap");
      if (classLoaderResolverMap != null) {
        classLoaderResolverMap.setAccessible(true);
        cMap=(Map<String,ClassLoaderResolver>)classLoaderResolverMap.get(nc);
        if (cMap != null) {
          return cMap.size();
        }
      }
    }
 catch (    Exception e) {
      System.out.println(e);
    }
  }
  return -1;
}
