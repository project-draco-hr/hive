{
  FsPermission permissions=fsStatus.getPermission();
  if (fsStatus.getOwner().equals(userName) && permissions.getUserAction().implies(action)) {
    return true;
  }
  if (permissions.getOtherAction().implies(action)) {
    return true;
  }
  String fileGroup=fsStatus.getGroup();
  String[] userGroups=UserGroupInformation.createRemoteUser(userName).getGroupNames();
  for (  String group : userGroups) {
    if (group.equals(fileGroup)) {
      return permissions.getGroupAction().implies(action);
    }
  }
  return false;
}
