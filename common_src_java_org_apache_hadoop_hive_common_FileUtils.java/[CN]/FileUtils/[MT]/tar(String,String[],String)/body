{
  TarArchiveOutputStream tOut=null;
  try {
    tOut=new TarArchiveOutputStream(new GzipCompressorOutputStream(new BufferedOutputStream(new FileOutputStream(new File(parentDir,outputFile)))));
    for (int i=0; i < inputFiles.length; i++) {
      File f=new File(inputFiles[i]);
      TarArchiveEntry tarEntry=new TarArchiveEntry(f,f.getName());
      tOut.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);
      tOut.putArchiveEntry(tarEntry);
      IOUtils.copy(new FileInputStream(f),tOut);
      tOut.closeArchiveEntry();
    }
  }
  finally {
    if (tOut != null) {
      tOut.finish();
      tOut.close();
    }
  }
}
