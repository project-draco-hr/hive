{
  InstanceCache<Foo,Wrapper<Foo>> ic=new InstanceCache<Foo,Wrapper<Foo>>(){
    @Override protected Wrapper makeInstance(    Foo hv,    Set<Foo> seenSchemas){
      return new Wrapper(hv);
    }
  }
;
  Foo f1=new Foo();
  Wrapper fc=ic.retrieve(f1,null);
  assertSame(f1,fc.wrapped);
  Foo f2=new Foo();
  Wrapper fc2=ic.retrieve(f2,null);
  assertSame(fc2,fc);
  assertSame(fc2.wrapped,f1);
}
