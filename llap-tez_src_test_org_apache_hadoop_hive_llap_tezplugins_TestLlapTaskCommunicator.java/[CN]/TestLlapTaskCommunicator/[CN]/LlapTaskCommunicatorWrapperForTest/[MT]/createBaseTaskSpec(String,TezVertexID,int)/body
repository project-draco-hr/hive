{
  TaskSpec taskSpec=mock(TaskSpec.class);
  Configuration conf=new Configuration(false);
  HiveConf.setVar(conf,HiveConf.ConfVars.HIVEQUERYID,"fakeQueryId");
  UserPayload userPayload;
  try {
    userPayload=TezUtils.createUserPayloadFromConf(conf);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  TezTaskAttemptID taskAttemptId=TezTaskAttemptID.getInstance(TezTaskID.getInstance(vertexId,taskIdx),0);
  doReturn(taskAttemptId).when(taskSpec).getTaskAttemptID();
  doReturn(DAG_NAME).when(taskSpec).getDAGName();
  doReturn(vertexName).when(taskSpec).getVertexName();
  ProcessorDescriptor processorDescriptor=ProcessorDescriptor.create("fakeClassName").setUserPayload(userPayload);
  doReturn(processorDescriptor).when(taskSpec).getProcessorDescriptor();
  return taskSpec;
}
