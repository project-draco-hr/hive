{
  try {
    authorizer=SessionState.get().getAuthorizerV2();
    String cmdString=analyzer.ctx.getCmd();
    SessionState ss=SessionState.get();
    HiveAuthzContext.Builder ctxBuilder=new HiveAuthzContext.Builder();
    ctxBuilder.setCommandString(cmdString);
    ctxBuilder.setUserIpAddress(ss.getUserIpAddress());
    ctxBuilder.setForwardedAddresses(ss.getForwardedAddresses());
    queryContext=ctxBuilder.build();
    if (authorizer != null && needTransform()) {
      enable=true;
      translator=new UnparseTranslator(conf);
      translator.enable();
    }
  }
 catch (  Exception e) {
    LOG.warn("Failed to initialize masking policy");
    throw new SemanticException(e);
  }
}
