{
  if (partial == null) {
    return;
  }
  NGramAggBuf myagg=(NGramAggBuf)agg;
  List<Text> partialNGrams=(List<Text>)loi.getList(partial);
  int n=Integer.parseInt(partialNGrams.get(partialNGrams.size() - 1).toString());
  if (n == 0) {
    return;
  }
  if (myagg.n > 0 && myagg.n != n) {
    throw new HiveException(getClass().getSimpleName() + ": mismatch in value for 'n'" + ", which usually is caused by a non-constant expression. Found '"+ n+ "' and '"+ myagg.n+ "'.");
  }
  myagg.n=n;
  partialNGrams.remove(partialNGrams.size() - 1);
  myagg.nge.merge(partialNGrams);
}
