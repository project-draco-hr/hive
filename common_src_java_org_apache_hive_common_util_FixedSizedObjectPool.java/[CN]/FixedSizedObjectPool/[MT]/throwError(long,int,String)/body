{
  long newState=state.get();
  if (casLog != null) {
    casLog.dumpLog(true);
  }
  String msg="Unexpected " + type + " at "+ arrayIndex+ "; state was "+ toString(oldState)+ ", now "+ toString(newState);
  LOG.info(msg);
  throw new AssertionError(msg);
}
