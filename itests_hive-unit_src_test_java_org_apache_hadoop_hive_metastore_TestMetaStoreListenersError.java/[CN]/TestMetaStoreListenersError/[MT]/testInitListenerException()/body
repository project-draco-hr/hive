{
  System.setProperty("hive.metastore.init.hooks",ErrorInitListener.class.getName());
  int port=MetaStoreUtils.findFreePort();
  try {
    HiveMetaStore.startMetaStore(port,ShimLoader.getHadoopThriftAuthBridge());
  }
 catch (  Throwable throwable) {
    Assert.assertEquals(MetaException.class,throwable.getClass());
    Assert.assertEquals("Failed to instantiate listener named: " + "org.apache.hadoop.hive.metastore.TestMetaStoreListenersError$ErrorInitListener, " + "reason: java.lang.IllegalArgumentException: exception on constructor",throwable.getMessage());
  }
}
