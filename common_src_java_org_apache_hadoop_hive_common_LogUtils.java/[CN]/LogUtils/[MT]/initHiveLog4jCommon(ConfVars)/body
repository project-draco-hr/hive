{
  HiveConf conf=new HiveConf();
  if (HiveConf.getVar(conf,confVarName).equals("")) {
    return initHiveLog4jDefault(conf,"",confVarName);
  }
 else {
    String log4jFileName=HiveConf.getVar(conf,confVarName);
    File log4jConfigFile=new File(log4jFileName);
    boolean fileExists=log4jConfigFile.exists();
    if (!fileExists) {
      return initHiveLog4jDefault(conf,"Not able to find conf file: " + log4jConfigFile,confVarName);
    }
 else {
      if (confVarName == HiveConf.ConfVars.HIVE_EXEC_LOG4J_FILE) {
        String queryId=HiveConf.getVar(conf,HiveConf.ConfVars.HIVEQUERYID);
        if (queryId == null || (queryId=queryId.trim()).isEmpty()) {
          queryId="unknown-" + System.currentTimeMillis();
        }
        System.setProperty(HiveConf.ConfVars.HIVEQUERYID.toString(),queryId);
      }
      LogManager.resetConfiguration();
      PropertyConfigurator.configure(log4jFileName);
      logConfigLocation(conf);
      return ("Logging initialized using configuration in " + log4jConfigFile);
    }
  }
}
