{
  ObjectInspector oi=objectInspectorCache.get(t);
  if (oi == null) {
    oi=getReflectionObjectInspectorNoCache(t,options);
    objectInspectorCache.put(t,oi);
  }
  verifyObjectInspector(options,oi,ObjectInspectorOptions.JAVA,new Class[]{ThriftStructObjectInspector.class,ProtocolBuffersStructObjectInspector.class});
  verifyObjectInspector(options,oi,ObjectInspectorOptions.THRIFT,new Class[]{ReflectionStructObjectInspector.class,ProtocolBuffersStructObjectInspector.class});
  verifyObjectInspector(options,oi,ObjectInspectorOptions.PROTOCOL_BUFFERS,new Class[]{ThriftStructObjectInspector.class,ReflectionStructObjectInspector.class});
  return oi;
}
