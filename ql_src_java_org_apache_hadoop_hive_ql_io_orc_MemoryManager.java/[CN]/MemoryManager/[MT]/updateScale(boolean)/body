{
  if (totalAllocation <= totalMemoryPool) {
    currentScale=1;
  }
 else {
    currentScale=(double)totalMemoryPool / totalAllocation;
  }
  if (!isAllocate) {
    notificationTrigger=Math.min(notificationTrigger,Math.round(totalMemoryPool * NOTIFICATION_FACTOR / currentScale));
  }
 else {
    if (totalAllocation > notificationTrigger) {
      for (      WriterInfo writer : writerList.values()) {
        writer.callback.checkMemory(currentScale);
      }
      notificationTrigger=Math.round(totalMemoryPool * NOTIFICATION_FACTOR / currentScale);
    }
  }
}
