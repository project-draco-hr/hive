{
  String servicePrinc=miniHiveKdc.getHiveServicePrincipal();
  assertNotNull(servicePrinc);
  miniHiveKdc.loginUser(servicePrinc);
  assertTrue(ShimLoader.getHadoopShims().isLoginKeytabBased());
  UserGroupInformation ugi=ShimLoader.getHadoopShims().getUGIForConf(hiveConf);
  assertEquals(MiniHiveKdc.HIVE_SERVICE_PRINCIPAL,ugi.getShortUserName());
}
