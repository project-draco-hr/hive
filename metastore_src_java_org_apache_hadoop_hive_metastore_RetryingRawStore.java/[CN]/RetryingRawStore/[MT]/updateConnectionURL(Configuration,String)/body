{
  String connectUrl=null;
  String currentUrl=getConnectionURL(conf);
  try {
    initConnectionUrlHook();
    if (urlHook != null) {
      if (badUrl != null) {
        urlHook.notifyBadConnectionUrl(badUrl);
      }
      connectUrl=urlHook.getJdoConnectionUrl(hiveConf);
    }
  }
 catch (  Exception e) {
    LOG.error("Exception while getting connection URL from the hook: " + e);
  }
  if (connectUrl != null && !connectUrl.equals(currentUrl)) {
    LOG.error(addPrefix(String.format("Overriding %s with %s",HiveConf.ConfVars.METASTORECONNECTURLKEY.toString(),connectUrl)));
    conf.set(HiveConf.ConfVars.METASTORECONNECTURLKEY.toString(),connectUrl);
    return true;
  }
  return false;
}
