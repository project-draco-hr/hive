{
  MockRequest r1=new MockRequest(createRequest(1,2),false,100000);
  MockRequest r2=new MockRequest(createRequest(2,4),false,100000);
  MockRequest r3=new MockRequest(createRequest(3,6),false,1000000);
  MockRequest r4=new MockRequest(createRequest(4,8),false,1000000);
  BlockingQueue queue=new PriorityBlockingQueue(4,new TaskExecutorService.PreemptionQueueComparator());
  queue.offer(r1);
  assertEquals(r1,queue.peek());
  queue.offer(r2);
  assertEquals(r1,queue.peek());
  queue.offer(r3);
  assertEquals(r1,queue.peek());
  queue.offer(r4);
  assertEquals(r1,queue.take());
  assertEquals(r2,queue.take());
  assertEquals(r3,queue.take());
  assertEquals(r4,queue.take());
}
