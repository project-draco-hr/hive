{
  TaskExecutorService scheduler=new TaskExecutorService(2,2,true);
  MockRequest r1=new MockRequest(createRequest(1,4),false,100000);
  scheduler.schedule(r1);
  Thread.sleep(100);
  MockRequest r2=new MockRequest(createRequest(2,4),false,100000);
  scheduler.schedule(r2);
  Thread.sleep(100);
  assertEquals(r1,scheduler.getPreemptionTask());
  scheduler.schedule(new MockRequest(createRequest(3,8),true,1000));
  Thread.sleep(100);
  assertEquals(r2,scheduler.getPreemptionTask());
  scheduler.schedule(new MockRequest(createRequest(4,8),true,1000));
  Thread.sleep(100);
  assertEquals(0,scheduler.getPreemptionListSize());
}
