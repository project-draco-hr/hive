{
  TaskExecutorService scheduler=new TaskExecutorService(2,2,true);
  scheduler.schedule(new MockRequest(createRequest(1,4),false,100000));
  Thread.sleep(100);
  scheduler.schedule(new MockRequest(createRequest(2,4),false,100000));
  Thread.sleep(100);
  assertEquals(2,scheduler.getPreemptionListSize());
  scheduler.schedule(new MockRequest(createRequest(3,8),true,1000));
  Thread.sleep(100);
  scheduler.schedule(new MockRequest(createRequest(4,8),true,1000));
  Thread.sleep(100);
  assertEquals(0,scheduler.getPreemptionListSize());
}
