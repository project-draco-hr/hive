{
  if (escaped) {
    int end=start + len;
    for (int i=start; i <= end; i++) {
      if (i == end || needsEscape[bytes[i] & 0xFF]) {
        if (i > start) {
          out.write(bytes,start,i - start);
        }
        start=i;
        if (i < len) {
          out.write(escapeChar);
        }
      }
    }
  }
 else {
    out.write(bytes,0,len);
  }
}
