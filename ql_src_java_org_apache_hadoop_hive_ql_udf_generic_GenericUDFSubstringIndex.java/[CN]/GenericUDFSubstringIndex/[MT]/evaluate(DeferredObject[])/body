{
  String str=getStringValue(arguments,0,converters);
  if (str == null) {
    return null;
  }
  if (str.length() == 0) {
    output.set("");
    return output;
  }
  String delim;
  if (isDelimConst) {
    delim=delimConst;
  }
 else {
    delim=getStringValue(arguments,1,converters);
  }
  if (delim == null) {
    return null;
  }
  if (delim.length() == 0) {
    output.set("");
    return output;
  }
  Integer countV;
  if (isCountConst) {
    countV=countConst;
  }
 else {
    countV=getIntValue(arguments,2,converters);
  }
  if (countV == null) {
    return null;
  }
  int count=countV.intValue();
  if (count == 0) {
    output.set("");
    return output;
  }
  String res;
  if (count > 0) {
    int idx=StringUtils.ordinalIndexOf(str,delim,count);
    if (idx != -1) {
      res=str.substring(0,idx);
    }
 else {
      res=str;
    }
  }
 else {
    int idx=StringUtils.lastOrdinalIndexOf(str,delim,-count);
    if (idx != -1) {
      res=str.substring(idx + 1);
    }
 else {
      res=str;
    }
  }
  output.set(res);
  return output;
}
