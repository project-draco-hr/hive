{
  if (hiveConf == null)   hiveConf=new HiveConf(this.getClass());
  hiveConf.set(HiveConf.ConfVars.PREEXECHOOKS.varname,"");
  hiveConf.set(HiveConf.ConfVars.POSTEXECHOOKS.varname,"");
  hiveConf.set(HiveConf.ConfVars.HIVE_SUPPORT_CONCURRENCY.varname,"false");
  hiveConf.set(HiveConf.ConfVars.METASTORECONNECTURLKEY.varname,"jdbc:derby:" + new File(workDir + "/metastore_db") + ";create=true");
  hiveConf.set(HiveConf.ConfVars.METASTOREWAREHOUSE.toString(),new File(workDir,"warehouse").toString());
  File derbyLogFile=new File(workDir + "/derby.log");
  derbyLogFile.createNewFile();
  System.setProperty("derby.stream.error.file",derbyLogFile.getPath());
  hiveMetaStoreClient=new HiveMetaStoreClient(hiveConf);
}
