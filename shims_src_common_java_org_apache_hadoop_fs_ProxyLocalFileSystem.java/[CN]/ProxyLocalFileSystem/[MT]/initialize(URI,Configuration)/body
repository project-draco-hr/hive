{
  String scheme=name.getScheme();
  String nameUriString=name.toString();
  if (Shell.WINDOWS) {
    nameUriString=nameUriString.replaceAll("%5C","/").replaceFirst("/[c-zC-Z]:","/").replaceFirst("^[c-zC-Z]:","");
    name=URI.create(nameUriString);
  }
  String authority=name.getAuthority() != null ? name.getAuthority() : "";
  String proxyUriString=nameUriString + "://" + authority+ "/";
  fs=ShimLoader.getHadoopShims().createProxyFileSystem(localFs,URI.create(proxyUriString));
  fs.initialize(name,conf);
}
