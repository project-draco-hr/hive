{
  handlerInst=new RetryingThriftCLIServiceClientTest(conf);
  TTransport tTransport=handlerInst.connectWithRetry(conf.getIntVar(HiveConf.ConfVars.HIVE_SERVER2_THRIFT_CLIENT_RETRY_LIMIT));
  ICLIService cliService=(ICLIService)Proxy.newProxyInstance(RetryingThriftCLIServiceClientTest.class.getClassLoader(),CLIServiceClient.class.getInterfaces(),handlerInst);
  return new CLIServiceClientWrapper(cliService,tTransport);
}
