{
  ShowCompactResponse resp=txnHandler.showCompact(new ShowCompactRequest());
  CompactionsByState compactionsByState=new CompactionsByState();
  compactionsByState.total=resp.getCompactsSize();
  for (  ShowCompactResponseElement compact : resp.getCompacts()) {
    if (TxnStore.FAILED_RESPONSE.equals(compact.getState())) {
      compactionsByState.failed++;
    }
 else     if (TxnStore.CLEANING_RESPONSE.equals(compact.getState())) {
      compactionsByState.readyToClean++;
    }
 else     if (TxnStore.INITIATED_RESPONSE.equals(compact.getState())) {
      compactionsByState.initiated++;
    }
 else     if (TxnStore.SUCCEEDED_RESPONSE.equals(compact.getState())) {
      compactionsByState.succeeded++;
    }
 else     if (TxnStore.WORKING_RESPONSE.equals(compact.getState())) {
      compactionsByState.working++;
    }
 else     if (TxnStore.ATTEMPTED_RESPONSE.equals(compact.getState())) {
      compactionsByState.attempted++;
    }
 else {
      throw new IllegalStateException("Unexpected state: " + compact.getState());
    }
  }
  return compactionsByState;
}
