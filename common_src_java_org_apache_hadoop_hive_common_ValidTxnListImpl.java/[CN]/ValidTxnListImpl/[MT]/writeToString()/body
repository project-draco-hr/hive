{
  StringBuilder buf=new StringBuilder();
  buf.append(highWatermark);
  if (exceptions.length == 0) {
    buf.append(':');
  }
 else {
    for (    long except : exceptions) {
      buf.append(':');
      buf.append(except);
    }
  }
  if (buf.length() > MAX_UNCOMPRESSED_LENGTH) {
    try {
      ByteArrayOutputStream byteBuf=new ByteArrayOutputStream();
      GZIPOutputStream gzip=new GZIPOutputStream(byteBuf);
      gzip.write(buf.toString().getBytes());
      gzip.close();
      StringBuilder buf2=new StringBuilder();
      buf2.append(COMPRESSION_MARKER);
      buf2.append(buf.length());
      buf2.append(':');
      buf2.append(byteBuf.toString(STRING_ENCODING));
      return buf2.toString();
    }
 catch (    IOException e) {
      LOG.error("Unable to compress transaction list, " + e.getMessage());
      throw new RuntimeException(e);
    }
  }
 else {
    return buf.toString();
  }
}
