{
  if (zkSession == null || zkSession.getState() == States.CLOSED) {
synchronized (this) {
      if (zkSession == null || zkSession.getState() == States.CLOSED) {
        try {
          zkSession=new ZooKeeper(this.zkConnectString,this.zkSessionTimeout,new ZooKeeperWatcher());
        }
 catch (        IOException ex) {
          throw new TokenStoreException("Token store error.",ex);
        }
      }
    }
  }
  return zkSession;
}
