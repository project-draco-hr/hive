{
  byte[] password;
  DelegationTokenInformation info;
synchronized (this) {
    password=super.createPassword(id);
    info=super.currentTokens.remove(id);
    if (info == null) {
      throw new IllegalStateException("Failed to retrieve token after creation");
    }
  }
  this.tokenStore.addToken(id,info);
  return password;
}
