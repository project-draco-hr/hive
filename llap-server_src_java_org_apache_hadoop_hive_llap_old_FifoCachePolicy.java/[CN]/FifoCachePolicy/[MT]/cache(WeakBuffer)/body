{
  WeakBuffer result=null;
  lock.lock();
  try {
    if (buffers.size() == maxBuffers) {
      Iterator<WeakBuffer> iter=buffers.iterator();
      while (iter.hasNext()) {
        WeakBuffer candidate=iter.next();
        if (candidate.invalidate()) {
          iter.remove();
          break;
        }
        result=candidate;
      }
      if (result == null)       return CANNOT_EVICT;
    }
    buffers.add(buffer);
  }
  finally {
    lock.unlock();
  }
  return result;
}
