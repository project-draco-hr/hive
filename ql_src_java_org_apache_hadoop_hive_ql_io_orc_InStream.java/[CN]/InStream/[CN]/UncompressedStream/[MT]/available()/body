{
  if (range != null && range.remaining() > 0) {
    return range.remaining();
  }
  return (int)(length - currentOffset);
}
