{
  String line;
  if (!isBeeLine) {
    if (defaultConnect(exitOnError) != ERRNO_OK && exitOnError) {
      return ERRNO_OTHER;
    }
  }
  while (!exit) {
    try {
      line=(getOpts().isSilent() && getOpts().getScriptFile() != null) ? reader.readLine(null,ConsoleReader.NULL_MASK) : reader.readLine(getPrompt());
      if (!isBeeLine) {
        line=cliToBeelineCmd(line);
      }
      if (!dispatch(line) && exitOnError) {
        return ERRNO_OTHER;
      }
    }
 catch (    Throwable t) {
      handleException(t);
      return ERRNO_OTHER;
    }
  }
  return ERRNO_OK;
}
