{
  while (!exit) {
    try {
      if (!dispatch(reader.readLine(getPrompt())) && exitOnError) {
        return ERRNO_OTHER;
      }
    }
 catch (    Throwable t) {
      handleException(t);
      return ERRNO_OTHER;
    }
  }
  return ERRNO_OK;
}
