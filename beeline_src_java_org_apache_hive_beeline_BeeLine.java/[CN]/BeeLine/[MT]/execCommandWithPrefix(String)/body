{
  Map<String,CommandHandler> cmdMap=new TreeMap<String,CommandHandler>();
  line=line.substring(1);
  for (int i=0; i < commandHandlers.length; i++) {
    String match=commandHandlers[i].matches(line);
    if (match != null) {
      cmdMap.put(match,commandHandlers[i]);
    }
  }
  if (cmdMap.size() == 0) {
    return error(loc("unknown-command",line));
  }
  if (cmdMap.size() > 1) {
    CommandHandler handler=cmdMap.get(line);
    if (handler == null) {
      return error(loc("multiple-matches",cmdMap.keySet().toString()));
    }
    return handler.execute(line);
  }
  return cmdMap.values().iterator().next().execute(line);
}
