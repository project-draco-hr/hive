{
  if (cmd == null)   return null;
  String cmd_trimmed=cmd.trim();
  String[] tokens=tokenizeCmd(cmd_trimmed);
  if (cmd_trimmed.equalsIgnoreCase("quit") || cmd_trimmed.equalsIgnoreCase("exit")) {
    return null;
  }
 else   if (tokens[0].equalsIgnoreCase("source")) {
    return cmd;
  }
 else   if (cmd_trimmed.startsWith("!")) {
    String shell_cmd=cmd_trimmed.substring(1);
    return "!sh " + shell_cmd;
  }
 else {
    return cmd;
  }
}
