{
  OperationLog log=operationManager.getOperationLogByThread();
  boolean excludeMatches=(loggingMode == OperationLog.LoggingLevel.VERBOSE);
  if (log == null) {
    return Filter.DENY;
  }
  OperationLog.LoggingLevel currentLoggingMode=log.getOpLoggingLevel();
  if (currentLoggingMode == OperationLog.LoggingLevel.NONE) {
    return Filter.DENY;
  }
  if (currentLoggingMode != loggingMode) {
    loggingMode=currentLoggingMode;
    setCurrentNamePattern(loggingMode);
  }
  boolean isMatch=namePattern.matcher(ev.getLoggerName()).matches();
  if (excludeMatches == isMatch) {
    return Filter.DENY;
  }
  return Filter.NEUTRAL;
}
