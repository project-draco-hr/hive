{
  buffer.indexInHeap=LlapCacheableBuffer.NOT_IN_CACHE;
  boolean isTail=buffer == listTail, isHead=buffer == listHead;
  if ((isTail != (buffer.next == null)) || (isHead != (buffer.prev == null))) {
    debugDumpListOnError(buffer);
    throw new AssertionError("LRFU list is corrupted.");
  }
  if (isTail) {
    listTail=buffer.prev;
  }
 else {
    buffer.next.prev=buffer.prev;
  }
  if (isHead) {
    listHead=buffer.next;
  }
 else {
    buffer.prev.next=buffer.next;
  }
}
