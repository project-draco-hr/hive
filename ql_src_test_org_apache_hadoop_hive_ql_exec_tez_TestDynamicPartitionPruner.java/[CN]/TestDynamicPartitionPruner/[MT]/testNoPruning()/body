{
  InputInitializerContext mockInitContext=mock(InputInitializerContext.class);
  MapWork mapWork=mock(MapWork.class);
  DynamicPartitionPruner pruner=new DynamicPartitionPrunerForEventTesting(mockInitContext,mapWork);
  PruneRunnable pruneRunnable=new PruneRunnable(pruner);
  Thread t=new Thread(pruneRunnable);
  t.start();
  try {
    pruneRunnable.start();
    pruneRunnable.awaitEnd();
  }
  finally {
    t.interrupt();
    t.join();
  }
}
