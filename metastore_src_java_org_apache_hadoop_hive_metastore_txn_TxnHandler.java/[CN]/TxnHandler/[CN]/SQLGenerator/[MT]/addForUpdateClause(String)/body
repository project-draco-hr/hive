{
switch (dbProduct) {
case DERBY:
    return selectStatement;
case MYSQL:
case ORACLE:
case POSTGRES:
  return selectStatement + " for update";
case SQLSERVER:
String modifier=" with (updlock)";
int wherePos=selectStatement.toUpperCase().indexOf(" WHERE ");
if (wherePos < 0) {
return selectStatement + modifier;
}
return selectStatement.substring(0,wherePos) + modifier + selectStatement.substring(wherePos,selectStatement.length());
default :
String msg="Unrecognized database product name <" + dbProduct + ">";
LOG.error(msg);
throw new MetaException(msg);
}
}
