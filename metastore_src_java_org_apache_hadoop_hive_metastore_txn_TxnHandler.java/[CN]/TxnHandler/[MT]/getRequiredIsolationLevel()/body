{
  if (dbProduct == null) {
    Connection tmp=null;
    try {
      tmp=getDbConn(Connection.TRANSACTION_READ_COMMITTED);
      determineDatabaseProduct(tmp);
    }
  finally {
      closeDbConn(tmp);
    }
  }
switch (dbProduct) {
case DERBY:
    return Connection.TRANSACTION_SERIALIZABLE;
case MYSQL:
case ORACLE:
case POSTGRES:
case SQLSERVER:
  return Connection.TRANSACTION_READ_COMMITTED;
default :
String msg="Unrecognized database product name <" + dbProduct + ">";
LOG.error(msg);
throw new MetaException(msg);
}
}
