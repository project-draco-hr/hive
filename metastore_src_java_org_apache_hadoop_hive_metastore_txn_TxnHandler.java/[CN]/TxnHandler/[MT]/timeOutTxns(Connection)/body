{
  long now=getDbTime(dbConn);
  Statement stmt=null;
  try {
    stmt=dbConn.createStatement();
    String s="select txn_id from TXNS where txn_state = '" + TXN_OPEN + "' and txn_last_heartbeat <  "+ (now - timeout);
    LOG.debug("Going to execute query <" + s + ">");
    ResultSet rs=stmt.executeQuery(s);
    List<Long> deadTxns=new ArrayList<Long>();
    for (int i=0; i < 20 && rs.next(); i++)     deadTxns.add(rs.getLong(1));
    if (deadTxns.size() > 0)     abortTxns(dbConn,deadTxns);
  }
  finally {
    closeStmt(stmt);
  }
}
