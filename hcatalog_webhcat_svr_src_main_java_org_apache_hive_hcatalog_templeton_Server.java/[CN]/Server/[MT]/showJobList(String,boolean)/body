{
  verifyUser();
  boolean showDetails=false;
  if (fields != null && !fields.equals("*")) {
    throw new BadParam("fields value other than * is not supported");
  }
  if (fields != null && fields.equals("*")) {
    showDetails=true;
  }
  ListDelegator ld=new ListDelegator(appConf);
  List<String> list=ld.run(getDoAsUser(),showall);
  List<JobItemBean> detailList=new ArrayList<JobItemBean>();
  for (  String job : list) {
    JobItemBean jobItem=new JobItemBean();
    jobItem.id=job;
    if (showDetails) {
      StatusDelegator sd=new StatusDelegator(appConf);
      QueueStatusBean statusBean=sd.run(getDoAsUser(),job);
      jobItem.detail=statusBean;
    }
    detailList.add(jobItem);
  }
  return detailList;
}
