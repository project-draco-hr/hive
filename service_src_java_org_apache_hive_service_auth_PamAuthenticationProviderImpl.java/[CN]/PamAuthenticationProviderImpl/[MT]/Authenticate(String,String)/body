{
  if (pamServiceNames == null || pamServiceNames.trim().isEmpty()) {
    throw new AuthenticationException("No PAM services are set.");
  }
  String pamServices[]=pamServiceNames.split(",");
  for (  String pamService : pamServices) {
    Pam pam=new Pam(pamService);
    boolean isAuthenticated=pam.authenticateSuccessful(user,password);
    if (!isAuthenticated) {
      throw new AuthenticationException("Error authenticating with the PAM service: " + pamService);
    }
  }
}
