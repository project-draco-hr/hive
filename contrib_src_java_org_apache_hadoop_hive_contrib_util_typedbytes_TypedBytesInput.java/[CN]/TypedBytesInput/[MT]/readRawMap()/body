{
  Buffer buffer=new Buffer();
  int length=readMapHeader();
  buffer.append(new byte[]{(byte)Type.MAP.code,(byte)(0xff & (length >> 24)),(byte)(0xff & (length >> 16)),(byte)(0xff & (length >> 8)),(byte)(0xff & length)});
  for (int i=0; i < length; i++) {
    buffer.append(readRaw());
    buffer.append(readRaw());
  }
  return buffer.get();
}
