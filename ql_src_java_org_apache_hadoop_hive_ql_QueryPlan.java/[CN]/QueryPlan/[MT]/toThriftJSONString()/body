{
  org.apache.hadoop.hive.ql.plan.api.Query q=getQueryPlan();
  TMemoryBuffer tmb=new TMemoryBuffer(q.toString().length() * 5);
  TJSONProtocol oprot=new TJSONProtocol(tmb);
  try {
    q.write(oprot);
  }
 catch (  TException e) {
    e.printStackTrace();
    return q.toString();
  }
  return tmb.toString("UTF-8");
}
