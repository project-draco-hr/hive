{
  while (!shutdown.get()) {
    WatchedPathInfo pathInfo;
    try {
      pathInfo=watchedPathQueue.take();
    }
 catch (    InterruptedException e) {
      if (shutdown.get()) {
        LOG.info("Shutting down WatchExpirer");
        break;
      }
 else {
        LOG.error("WatchExpirer interrupted before being shutdown");
        throw new RuntimeException("WatchExpirer interrupted before being shutdown",e);
      }
    }
    WatchKey watchKey=pathInfo.getWatchKey();
    if (watchKey != null && watchKey.isValid()) {
      watchKey.cancel();
    }
  }
  return null;
}
