{
  String[] allKeys=tokenStore.getMasterKeys();
  Map<Integer,DelegationKey> keys=new HashMap<Integer,DelegationKey>(allKeys.length);
  for (  String keyStr : allKeys) {
    DelegationKey key=new DelegationKey();
    try {
      decodeWritable(key,keyStr);
      keys.put(key.getKeyId(),key);
    }
 catch (    IOException ex) {
      LOGGER.error("Failed to load master key.",ex);
    }
  }
synchronized (this) {
    super.allKeys.clear();
    super.allKeys.putAll(keys);
  }
  return keys;
}
