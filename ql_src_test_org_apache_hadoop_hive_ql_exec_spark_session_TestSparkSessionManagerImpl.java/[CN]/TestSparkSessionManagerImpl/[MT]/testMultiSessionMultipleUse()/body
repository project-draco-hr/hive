{
  sessionManagerHS2=SparkSessionManagerImpl.getInstance();
  sessionManagerHS2.shutdown();
  HiveConf hiveConf=new HiveConf();
  sessionManagerHS2.setup(hiveConf);
  List<Thread> threadList=new ArrayList<Thread>();
  for (int i=0; i < 10; i++) {
    Thread t=new Thread(new SessionThread(),"Session thread " + i);
    t.start();
    threadList.add(t);
  }
  for (  Thread t : threadList) {
    try {
      t.join();
    }
 catch (    InterruptedException e) {
      String msg="Interrupted while waiting for test session threads.";
      LOG.error(msg,e);
      fail(msg);
    }
  }
  assertFalse("At least one of the session threads failed. See the test output for details.",anyFailedSessionThread);
  System.out.println("Ending SessionManagerHS2");
  sessionManagerHS2.shutdown();
}
