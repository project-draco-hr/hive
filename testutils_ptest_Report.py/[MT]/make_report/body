def make_report(args):
    global report_dir, one_file
    report_dir = args.report_dir
    one_file = args.one_file
    test_run = TestRun(args.log_dir)
    test_run.render_files()
    print('Summary:')
    print('  tests run:', test_run.tests())
    print('  failures:', test_run.failures())
    print('  errors:', test_run.errors())
    failed_results = {}
    files = os.listdir(args.log_dir)
    pattern = re.compile('^([^-]+-[^-]+)-(.*)\\.fail$')
    for f in files:
        match = pattern.findall(f)
        if match:
            (host, test) = match[0]
            if (host not in failed_results):
                failed_results[host] = []
            failed_results[host].append(test)
    if failed_results:
        print()
        print('Some tests faled to produce a log and are not included in the report:')
        for host in failed_results:
            print('  {0}:'.format(host))
            for test in failed_results[host]:
                print('    {0}'.format(test))
