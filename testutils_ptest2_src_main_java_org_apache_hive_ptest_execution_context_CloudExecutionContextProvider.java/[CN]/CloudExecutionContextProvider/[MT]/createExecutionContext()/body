{
  boolean error=true;
  try {
    Set<NodeMetadata> nodes=createNodes(mNumHosts);
    Set<Host> hosts=Sets.newHashSet();
    for (    NodeMetadata node : nodes) {
      hosts.add(new Host(node.getHostname(),mUser,mSlaveLocalDirs,mNumThreads));
    }
    error=false;
    return new ExecutionContext(this,hosts,mWorkingDir.getAbsolutePath(),mPrivateKey);
  }
  finally {
    if (!error) {
      syncLog();
    }
  }
}
