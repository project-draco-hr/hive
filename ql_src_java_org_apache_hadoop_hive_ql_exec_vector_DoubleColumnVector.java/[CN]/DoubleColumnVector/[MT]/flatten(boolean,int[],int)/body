{
  flattenPush();
  if (isRepeating) {
    isRepeating=false;
    double repeatVal=vector[0];
    if (selectedInUse) {
      for (int j=0; j < size; j++) {
        int i=sel[j];
        vector[i]=repeatVal;
      }
    }
 else {
      Arrays.fill(vector,0,size,repeatVal);
    }
    flattenRepeatingNulls(selectedInUse,sel,size);
  }
  flattenNoNulls(selectedInUse,sel,size);
}
