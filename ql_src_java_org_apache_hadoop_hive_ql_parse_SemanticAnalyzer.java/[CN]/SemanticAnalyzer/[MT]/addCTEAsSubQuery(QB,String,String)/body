{
  cteAlias=cteAlias == null ? cteName : cteAlias;
  ASTNode cteQryNode=findCTEFromName(qb,cteName);
  QBExpr cteQBExpr=new QBExpr(cteAlias);
  String cteText=ctx.getTokenRewriteStream().toString(cteQryNode.getTokenStartIndex(),cteQryNode.getTokenStopIndex());
  final ASTNodeOrigin cteOrigin=new ASTNodeOrigin("CTE",cteName,cteText,cteAlias,cteQryNode);
  cteQryNode=(ASTNode)ParseDriver.adaptor.dupTree(cteQryNode);
  SubQueryUtils.setOriginDeep(cteQryNode,cteOrigin);
  doPhase1QBExpr(cteQryNode,cteQBExpr,qb.getId(),cteAlias);
  qb.rewriteCTEToSubq(cteAlias,cteName,cteQBExpr);
}
