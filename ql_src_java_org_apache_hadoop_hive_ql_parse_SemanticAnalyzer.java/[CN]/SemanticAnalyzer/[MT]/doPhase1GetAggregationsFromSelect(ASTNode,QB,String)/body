{
  LinkedHashMap<String,ASTNode> aggregationTrees=new LinkedHashMap<String,ASTNode>();
  for (int i=0; i < selExpr.getChildCount(); ++i) {
    ASTNode sel=(ASTNode)selExpr.getChild(i);
    doPhase1GetAllAggregations((ASTNode)sel.getChild(0),aggregationTrees);
  }
  if (queryProperties.hasWindowing() && qb.getWindowingSpec(dest) != null) {
    HashMap<String,ASTNode> aliasToWdwExprs=qb.getParseInfo().getWindowingExprsForClause(dest);
    LinkedHashMap<String,ASTNode> aggTreesMinusWindowing=new LinkedHashMap<String,ASTNode>();
    for (    Map.Entry<String,ASTNode> entry : aggregationTrees.entrySet()) {
      if (!aliasToWdwExprs.containsKey(entry.getKey())) {
        aggTreesMinusWindowing.put(entry.getKey(),entry.getValue());
      }
    }
    aggregationTrees=aggTreesMinusWindowing;
  }
  return aggregationTrees;
}
