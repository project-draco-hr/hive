{
  boolean jsonOutput=work.isFormatted();
  if (out != null) {
    out.print(indentString(indent));
    out.println("STAGE PLANS:");
  }
  JSONObject json=jsonOutput ? new JSONObject() : null;
  HashSet<Task<? extends Serializable>> displayedSet=new HashSet<Task<? extends Serializable>>();
  for (  Task<? extends Serializable> rootTask : rootTasks) {
    outputPlan(rootTask,out,json,work.getExtended(),jsonOutput,displayedSet,jsonOutput ? 0 : indent + 2);
  }
  return jsonOutput ? json : null;
}
