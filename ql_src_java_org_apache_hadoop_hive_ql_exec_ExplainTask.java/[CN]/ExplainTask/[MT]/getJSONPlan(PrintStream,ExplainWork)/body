{
  JSONObject outJSONObject=new JSONObject();
  boolean jsonOutput=work.isFormatted();
  if (jsonOutput) {
    out=null;
  }
  if (work.getAstStringTree() != null) {
    String jsonAST=outputAST(work.getAstStringTree(),out,jsonOutput,0);
    if (out != null) {
      out.println();
    }
    if (jsonOutput) {
      outJSONObject.put("ABSTRACT SYNTAX TREE",jsonAST);
    }
  }
  JSONObject jsonDependencies=outputDependencies(out,jsonOutput,work.getRootTasks(),0);
  if (out != null) {
    out.println();
  }
  if (jsonOutput) {
    outJSONObject.put("STAGE DEPENDENCIES",jsonDependencies);
  }
  JSONObject jsonPlan=outputStagePlans(out,work,work.getRootTasks(),0);
  if (jsonOutput) {
    outJSONObject.put("STAGE PLANS",jsonPlan);
  }
  return jsonOutput ? outJSONObject : null;
}
