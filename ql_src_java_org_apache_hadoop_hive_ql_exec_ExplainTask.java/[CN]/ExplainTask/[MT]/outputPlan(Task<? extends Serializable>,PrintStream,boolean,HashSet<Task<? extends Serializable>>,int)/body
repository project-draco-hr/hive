{
  if (displayedSet.contains(task)) {
    return;
  }
  displayedSet.add(task);
  out.print(indentString(indent));
  out.printf("Stage: %s\n",task.getId());
  outputPlan(task.getWork(),out,extended,indent + 2);
  out.println();
  if (task instanceof ConditionalTask && ((ConditionalTask)task).getListTasks() != null) {
    for (    Task<? extends Serializable> con : ((ConditionalTask)task).getListTasks()) {
      outputPlan(con,out,extended,displayedSet,indent);
    }
  }
  if (task.getChildTasks() != null) {
    for (    Task<? extends Serializable> child : task.getChildTasks()) {
      outputPlan(child,out,extended,displayedSet,indent);
    }
  }
}
