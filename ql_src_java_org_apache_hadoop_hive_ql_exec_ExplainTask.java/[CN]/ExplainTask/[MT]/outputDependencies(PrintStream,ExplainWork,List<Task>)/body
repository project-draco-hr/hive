{
  boolean jsonOutput=work.isFormatted();
  boolean appendTaskType=work.isAppendTaskType();
  if (out != null) {
    out.println("STAGE DEPENDENCIES:");
  }
  JSONObject json=jsonOutput ? new JSONObject() : null;
  for (  Task task : tasks) {
    JSONObject jsonOut=outputDependencies(task,out,json,jsonOutput,appendTaskType,2);
    if (jsonOutput && jsonOut != null) {
      json.put(task.getId(),jsonOut);
    }
  }
  return jsonOutput ? json : null;
}
