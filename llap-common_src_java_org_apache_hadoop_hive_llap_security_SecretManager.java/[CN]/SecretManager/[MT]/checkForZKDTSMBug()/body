{
  long expectedRenewTimeSec=conf.getLong(DelegationTokenManager.RENEW_INTERVAL,-1);
  LOG.info("Checking for tokenRenewInterval bug: " + expectedRenewTimeSec);
  if (expectedRenewTimeSec == -1)   return;
  java.lang.reflect.Field f=null;
  try {
    Class<?> c=org.apache.hadoop.security.token.delegation.AbstractDelegationTokenSecretManager.class;
    f=c.getDeclaredField("tokenRenewInterval");
    f.setAccessible(true);
  }
 catch (  Throwable t) {
    LOG.error("Failed to check for tokenRenewInterval bug, hoping for the best",t);
    return;
  }
  try {
    long realValue=f.getLong(this);
    long expectedValue=expectedRenewTimeSec * 1000;
    LOG.info("tokenRenewInterval is: " + realValue + " (expected "+ expectedValue+ ")");
    if (realValue == expectedRenewTimeSec) {
      f.setLong(this,expectedValue);
    }
  }
 catch (  Exception ex) {
    throw new RuntimeException("Failed to address tokenRenewInterval bug",ex);
  }
}
