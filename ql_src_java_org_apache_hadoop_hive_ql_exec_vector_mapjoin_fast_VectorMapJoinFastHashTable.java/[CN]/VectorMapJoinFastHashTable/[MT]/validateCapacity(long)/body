{
  if (Long.bitCount(capacity) != 1) {
    throw new AssertionError("Capacity must be a power of two");
  }
  if (capacity <= 0) {
    throw new AssertionError("Invalid capacity " + capacity);
  }
}
