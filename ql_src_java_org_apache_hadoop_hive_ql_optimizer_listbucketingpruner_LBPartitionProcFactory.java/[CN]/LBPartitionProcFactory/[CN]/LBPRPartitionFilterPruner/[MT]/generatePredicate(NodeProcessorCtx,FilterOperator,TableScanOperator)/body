{
  LBOpPartitionWalkerCtx owc=(LBOpPartitionWalkerCtx)procCtx;
  ParseContext parseCtx=owc.getParseContext();
  PrunedPartitionList prunedPartList=parseCtx.getOpToPartList().get(top);
  if (prunedPartList == null) {
    ExprNodeDesc ppr_pred=parseCtx.getOpToPartPruner().get(top);
    if (ppr_pred != null) {
      try {
        prunedPartList=PartitionPruner.prune(parseCtx.getTopToTable().get(top),ppr_pred,parseCtx.getConf(),(String)parseCtx.getTopOps().keySet().toArray()[0],parseCtx.getPrunedPartitions());
        if (prunedPartList != null) {
          owc.getParseContext().getOpToPartList().put(top,prunedPartList);
        }
      }
 catch (      HiveException e) {
        throw new SemanticException(e.getMessage(),e);
      }
    }
  }
  if (prunedPartList != null) {
    owc.setPartitions(prunedPartList);
  }
}
