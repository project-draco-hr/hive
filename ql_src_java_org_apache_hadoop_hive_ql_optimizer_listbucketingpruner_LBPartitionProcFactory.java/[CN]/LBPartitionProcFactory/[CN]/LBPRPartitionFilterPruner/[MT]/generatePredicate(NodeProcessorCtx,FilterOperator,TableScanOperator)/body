{
  LBOpPartitionWalkerCtx owc=(LBOpPartitionWalkerCtx)procCtx;
  Table tbl=owc.getParseContext().getTopToTable().get(top);
  if (tbl.isPartitioned()) {
    ParseContext parseCtx=owc.getParseContext();
    PrunedPartitionList prunedPartList;
    try {
      String alias=(String)parseCtx.getTopOps().keySet().toArray()[0];
      prunedPartList=PartitionPruner.prune(top,parseCtx,alias);
    }
 catch (    HiveException e) {
      throw new SemanticException(e.getMessage(),e);
    }
    if (prunedPartList != null) {
      owc.setPartitions(prunedPartList);
    }
  }
}
