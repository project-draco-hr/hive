{
  String serializedCmd=null;
  try {
    serializedCmd=ReplicationUtils.serializeCommand(cmd);
  }
 catch (  IOException e) {
    LOG.error("Serialization error",e);
    assertNull(e);
  }
  Command cmd2=null;
  try {
    cmd2=ReplicationUtils.deserializeCommand(serializedCmd);
  }
 catch (  IOException e) {
    LOG.error("Serialization error",e);
    assertNull(e);
  }
  assertEquals(cmd.getClass(),cmd2.getClass());
  assertEquals(cmd.getEventId(),cmd2.getEventId());
  assertEquals(cmd.get(),cmd2.get());
  assertEquals(cmd.isUndoable(),cmd2.isUndoable());
  if (cmd.isUndoable()) {
    assertEquals(cmd.getUndo(),cmd2.getUndo());
  }
  assertEquals(cmd.isRetriable(),cmd2.isRetriable());
}
