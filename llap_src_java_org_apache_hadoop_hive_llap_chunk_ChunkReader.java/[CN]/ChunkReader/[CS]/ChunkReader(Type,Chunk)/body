{
  this.type=type;
  this.chunk=chunk;
  byte firstByte=chunk.buffer.getContents().get(chunk.offset);
  if (firstByte != ChunkUtils.FORMAT_VERSION) {
    throw new UnsupportedOperationException("Chunk doesn't start as expected: " + firstByte);
  }
  if (Integer.bitCount(ChunkUtils.BITMASK_SIZE_BYTES) != 1 || (ChunkUtils.BITMASK_SIZE_BYTES < 8)) {
    throw new AssertionError("Must be a power of two >= 8: " + ChunkUtils.BITMASK_SIZE_BYTES);
  }
}
