{
  if (UserGroupInformation.isSecurityEnabled()) {
    UserGroupInformation.loginUserFromKeytab(conf.kerberosPrincipal(),conf.kerberosKeytab());
  }
  Server server=new Server(port);
  ServletContextHandler root=new ServletContextHandler(server,"/");
  root.addFilter(makeAuthFilter(),"/*",FilterMapping.REQUEST);
  ServletHolder h=new ServletHolder(new ServletContainer(makeJerseyConfig()));
  root.addServlet(h,"/" + SERVLET_PATH + "/*");
  addRedirects(server);
  server.start();
  return server;
}
