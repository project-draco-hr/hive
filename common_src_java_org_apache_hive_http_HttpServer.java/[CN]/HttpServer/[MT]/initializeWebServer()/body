{
  QueuedThreadPool threadPool=maxThreads <= 0 ? new QueuedThreadPool() : new QueuedThreadPool(maxThreads);
  threadPool.setDaemon(true);
  threadPool.setName(name + "-web");
  webServer.setThreadPool(threadPool);
  Connector connector=createDefaultChannelConnector();
  connector.setHost(host);
  connector.setPort(port);
  webServer.addConnector(connector);
  ContextHandlerCollection contexts=new ContextHandlerCollection();
  contexts.addHandler(webAppContext);
  webServer.setHandler(contexts);
  addServlet("jmx","/jmx",JMXJsonServlet.class);
  addServlet("conf","/conf",ConfServlet.class);
  ServletContextHandler staticCtx=new ServletContextHandler(contexts,"/static");
  staticCtx.setResourceBase(appDir + "/static");
  staticCtx.addServlet(DefaultServlet.class,"/*");
  staticCtx.setDisplayName("static");
  String logDir=getLogDir();
  if (logDir != null) {
    ServletContextHandler logCtx=new ServletContextHandler(contexts,"/logs");
    setContextAttributes(logCtx.getServletContext());
    logCtx.addServlet(AdminAuthorizedServlet.class,"/*");
    logCtx.setResourceBase(logDir);
    logCtx.setDisplayName("logs");
  }
}
