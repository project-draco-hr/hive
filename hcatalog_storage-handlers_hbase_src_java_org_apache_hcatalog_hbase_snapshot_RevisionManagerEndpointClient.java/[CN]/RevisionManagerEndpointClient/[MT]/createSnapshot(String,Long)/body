{
  return call(new Batch.Call<RevisionManagerEndpointService,TableSnapshot>(){
    @Override public TableSnapshot call(    RevisionManagerEndpointService service) throws IOException {
      ServerRpcController controller=new ServerRpcController();
      BlockingRpcCallback<CreateSnapshotResponse> done=new BlockingRpcCallback<CreateSnapshotResponse>();
      CreateSnapshotRequest.Builder builder=CreateSnapshotRequest.newBuilder().setTableName(tableName);
      if (revision != null) {
        builder.setRevision(revision);
      }
      service.createSnapshot(controller,builder.build(),done);
      return rpcConverter.convertTableSnapshot(blockOnResponse(done,controller).getTableSnapshot());
    }
  }
);
}
