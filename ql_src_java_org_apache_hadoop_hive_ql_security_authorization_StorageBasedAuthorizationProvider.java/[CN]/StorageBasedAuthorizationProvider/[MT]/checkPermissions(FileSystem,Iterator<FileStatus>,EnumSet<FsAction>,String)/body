{
  FsAction checkActions=FsAction.NONE;
  for (  FsAction action : actions) {
    checkActions=checkActions.or(action);
  }
  Iterator<FileStatus> nonNullFileStatuses=Iterators.filter(fileStatuses,new Predicate<FileStatus>(){
    @Override public boolean apply(    FileStatus fileStatus){
      return fileStatus != null;
    }
  }
);
  try {
    FileUtils.checkFileAccessWithImpersonation(fs,nonNullFileStatuses,EnumSet.of(checkActions),user);
  }
 catch (  Exception err) {
    if (err.getClass().getName().equals("org.apache.hadoop.fs.permission.AccessControlException")) {
      throw accessControlException(err);
    }
    throw new HiveException(err);
  }
}
