{
  ZooKeeperHiveLock zLock=(ZooKeeperHiveLock)hiveLock;
  try {
    zkpClient.delete(zLock.getPath(),-1);
    HiveLockObject obj=zLock.getHiveLockObject();
    String name=getLastObjectName(parent,obj);
    List<String> children=zkpClient.getChildren(name,false);
    if ((children == null) || (children.isEmpty())) {
      try {
        zkpClient.delete(name,-1);
      }
 catch (      KeeperException.NoNodeException e) {
        LOG.debug("Node " + name + " previously deleted when attempting to delete.");
      }
    }
  }
 catch (  Exception e) {
    LOG.error("Failed to release ZooKeeper lock: ",e);
    throw new LockException(e);
  }
}
