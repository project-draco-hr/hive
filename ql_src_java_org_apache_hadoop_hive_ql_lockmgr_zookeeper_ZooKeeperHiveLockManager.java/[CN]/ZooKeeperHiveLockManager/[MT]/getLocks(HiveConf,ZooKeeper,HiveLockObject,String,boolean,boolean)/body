{
  List<HiveLock> locks=new ArrayList<HiveLock>();
  List<String> children;
  try {
    children=zkpClient.getChildren("/" + parent,false);
  }
 catch (  Exception e) {
    return locks;
  }
  for (  String child : children) {
    child="/" + parent + "/"+ child;
    HiveLockMode mode=getLockMode(conf,child);
    if (mode == null) {
      continue;
    }
    String data="NULL";
    HiveLockObject obj=getLockObject(conf,child,mode,data,verifyTablePartition);
    if (obj == null) {
      continue;
    }
    if ((key == null) || (obj.getName().equals(key.getName()))) {
      if (fetchData) {
        try {
          data=new String(zkpClient.getData(child,new DummyWatcher(),null));
        }
 catch (        Exception e) {
          LOG.error("Error in getting data for " + child + " "+ e);
        }
      }
      obj.setData(data);
      HiveLock lck=(HiveLock)(new ZooKeeperHiveLock(child,obj,mode));
      locks.add(lck);
    }
  }
  return locks;
}
