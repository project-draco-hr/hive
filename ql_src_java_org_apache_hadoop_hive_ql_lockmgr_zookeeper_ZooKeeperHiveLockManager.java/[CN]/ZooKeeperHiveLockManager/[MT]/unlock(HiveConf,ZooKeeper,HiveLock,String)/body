{
  ZooKeeperHiveLock zLock=(ZooKeeperHiveLock)hiveLock;
  try {
    zkpClient.delete(zLock.getPath(),-1);
    HiveLockObject obj=zLock.getHiveLockObject();
    String name=getLastObjectName(parent,obj);
    List<String> children=zkpClient.getChildren(name,false);
    if ((children == null) || (children.isEmpty())) {
      zkpClient.delete(name,-1);
    }
  }
 catch (  Exception e) {
    LOG.error("Failed to release ZooKeeper lock: " + e);
    throw new LockException(e);
  }
}
