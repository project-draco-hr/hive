{
  List<HiveLock> locks=new ArrayList<HiveLock>();
  List<String> children;
  try {
    children=zkpClient.getChildren("/" + parent,false);
  }
 catch (  Exception e) {
    return locks;
  }
  for (  String child : children) {
    String data="NULL";
    child="/" + parent + "/"+ child;
    try {
      data=new String(zkpClient.getData(child,new DummyWatcher(),null));
    }
 catch (    Exception e) {
      LOG.error("Error in getting data for " + child + " "+ e);
    }
    HiveLockMode mode=getLockMode(conf,child);
    if (mode == null) {
      continue;
    }
    HiveLockObject obj=getLockObject(conf,child,mode,data);
    if ((key == null) || (obj.getName().equals(key.getName()))) {
      HiveLock lck=(HiveLock)(new ZooKeeperHiveLock(child,obj,mode));
      locks.add(lck);
    }
  }
  return locks;
}
