{
  hiveConf=new HiveConf();
  hiveConf.setBoolVar(ConfVars.HIVE_SERVER2_SUPPORT_DYNAMIC_SERVICE_DISCOVERY,true);
  hiveConf.setIntVar(ConfVars.HIVE_ZOOKEEPER_CONNECTION_MAX_RETRIES,0);
  hiveConf.setTimeVar(ConfVars.HIVE_ZOOKEEPER_CONNECTION_BASESLEEPTIME,0,TimeUnit.MILLISECONDS);
  miniHS2=new MiniHS2(hiveConf);
  Map<String,String> confOverlay=new HashMap<String,String>();
  try {
    miniHS2.start(confOverlay);
  }
 catch (  Exception ex) {
    LOG.warn("Zookeeper is not set up intentionally, so the error is expected (unless it's not related to ZK): " + ex);
    miniHS2.setStarted(true);
  }
}
