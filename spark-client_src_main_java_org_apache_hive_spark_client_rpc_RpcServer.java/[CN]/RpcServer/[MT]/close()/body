{
  try {
    channel.close();
    for (Iterator<ClientInfo> clients=pendingClients.iterator(); clients.hasNext(); ) {
      ClientInfo client=clients.next();
      clients.remove();
      client.promise.cancel(true);
    }
  }
  finally {
    group.shutdownGracefully();
  }
}
