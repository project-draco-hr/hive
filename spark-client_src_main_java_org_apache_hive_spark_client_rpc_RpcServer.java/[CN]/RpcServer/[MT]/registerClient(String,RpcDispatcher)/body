{
  final Promise<Rpc> promise=group.next().newPromise();
  Runnable timeout=new Runnable(){
    @Override public void run(){
      promise.setFailure(new TimeoutException("Timed out waiting for client connection."));
    }
  }
;
  ScheduledFuture<?> timeoutFuture=group.schedule(timeout,config.getServerConnectTimeoutMs(),TimeUnit.MILLISECONDS);
  final ClientInfo client=new ClientInfo(promise,secret,serverDispatcher,timeoutFuture);
  pendingClients.add(client);
  promise.addListener(new GenericFutureListener<Promise<Rpc>>(){
    @Override public void operationComplete(    Promise<Rpc> p){
      if (p.isCancelled()) {
        pendingClients.remove(client);
      }
    }
  }
);
  return promise;
}
