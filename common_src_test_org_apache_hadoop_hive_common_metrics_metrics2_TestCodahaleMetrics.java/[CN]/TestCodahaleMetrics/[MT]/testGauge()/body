{
  TestMetricsVariable testVar=new TestMetricsVariable();
  testVar.setValue(20);
  MetricsFactory.getInstance().addGauge("gauge1",testVar);
  Thread.sleep(2000);
  byte[] jsonData=Files.readAllBytes(Paths.get(jsonReportFile.getAbsolutePath()));
  ObjectMapper objectMapper=new ObjectMapper();
  JsonNode rootNode=objectMapper.readTree(jsonData);
  JsonNode gaugesNode=rootNode.path("gauges");
  JsonNode methodGaugeNode=gaugesNode.path("gauge1");
  JsonNode countNode=methodGaugeNode.path("value");
  Assert.assertEquals(countNode.asInt(),testVar.getValue());
  testVar.setValue(40);
  Thread.sleep(2000);
  jsonData=Files.readAllBytes(Paths.get(jsonReportFile.getAbsolutePath()));
  rootNode=objectMapper.readTree(jsonData);
  gaugesNode=rootNode.path("gauges");
  methodGaugeNode=gaugesNode.path("gauge1");
  countNode=methodGaugeNode.path("value");
  Assert.assertEquals(countNode.asInt(),testVar.getValue());
}
