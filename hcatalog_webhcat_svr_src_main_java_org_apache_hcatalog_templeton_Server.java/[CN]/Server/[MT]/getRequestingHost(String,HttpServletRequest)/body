{
  final String unkHost="???";
  if (request == null) {
    LOG.warn("request is null; cannot determine hostname");
    return unkHost;
  }
  try {
    String address=request.getRemoteAddr();
    if (address == null) {
      LOG.warn(MessageFormat.format("Request remote address is NULL for user [{0}]",requestingUser));
      return unkHost;
    }
    String hostName=InetAddress.getByName(address).getCanonicalHostName();
    if (LOG.isDebugEnabled()) {
      LOG.debug(MessageFormat.format("Resolved remote hostname: [{0}]",hostName));
    }
    return hostName;
  }
 catch (  UnknownHostException ex) {
    LOG.warn(MessageFormat.format("Request remote address could not be resolved, {0}",ex.toString(),ex));
    return unkHost;
  }
}
