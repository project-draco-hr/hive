{
  GrantInfoList rolePrincipals=getRolePrincipals(roleName);
  if (rolePrincipals == null) {
    return;
  }
  for (int i=0; i < rolePrincipals.grantInfos.size(); i++) {
    if (rolePrincipals.grantInfos.get(i).principalType == type && rolePrincipals.grantInfos.get(i).principalName.equals(principalName)) {
      if (grantOnly)       rolePrincipals.grantInfos.get(i).grantOption=false;
 else       rolePrincipals.grantInfos.remove(i);
      break;
    }
  }
  byte[] key=HBaseUtils.buildKey(roleName);
  byte[] serialized=HBaseUtils.serialize(rolePrincipals);
  store(ROLE_TABLE,key,CATALOG_CF,ROLES_COL,serialized);
  flush();
  roleCache.put(roleName,rolePrincipals);
}
