{
  MyCliSessionState ss=new MyCliSessionState(new HiveConf(),org.apache.hadoop.hive.cli.TestCliDriverMethods.MyCliSessionState.ClientResult.RETURN_T_EXCEPTION);
  ByteArrayOutputStream data=new ByteArrayOutputStream();
  ss.err=new PrintStream(data);
  ss.out=System.out;
  MyCliSessionState.start(ss);
  CliDriver cliDriver=new CliDriver();
  cliDriver.processCmd("remote command");
  assertTrue(data.toString().contains("[Thrift Error]: test TException"));
  assertTrue(data.toString().contains("[Thrift Error]: Hive server is not cleaned due to thrift exception: test TException"));
}
