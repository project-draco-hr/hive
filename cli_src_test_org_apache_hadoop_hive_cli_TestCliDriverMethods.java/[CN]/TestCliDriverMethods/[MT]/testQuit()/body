{
  CliSessionState ss=new CliSessionState(new HiveConf());
  ss.err=System.err;
  ss.out=System.out;
  NoExitSecurityManager newSecurityManager=new NoExitSecurityManager();
  try {
    CliSessionState.start(ss);
    CliDriver cliDriver=new CliDriver();
    cliDriver.processCmd("quit");
    fail("should be exit");
  }
 catch (  ExitException e) {
    assertEquals(0,e.getStatus());
  }
catch (  Exception e) {
    newSecurityManager.resetSecurityManager();
    throw e;
  }
  try {
    CliSessionState.start(ss);
    CliDriver cliDriver=new CliDriver();
    cliDriver.processCmd("exit");
    fail("should be exit");
  }
 catch (  ExitException e) {
    assertEquals(0,e.getStatus());
  }
 finally {
    newSecurityManager.resetSecurityManager();
  }
}
