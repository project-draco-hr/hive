{
  boolean deterministicFuncWithSingleInputRef=true;
  RexVisitor<Void> visitor=new DeterMinisticFuncVisitorImpl(){
    Set<Integer> inputRefs=new HashSet<Integer>();
    @Override public Void visitInputRef(    RexInputRef inputRef){
      if (validInputRefs.contains(inputRef.getIndex())) {
        inputRefs.add(inputRef.getIndex());
        if (inputRefs.size() > 1) {
          throw new Util.FoundOne(inputRef);
        }
      }
 else {
        throw new Util.FoundOne(inputRef);
      }
      return null;
    }
  }
;
  try {
    expr.accept(visitor);
  }
 catch (  Util.FoundOne e) {
    deterministicFuncWithSingleInputRef=false;
  }
  return deterministicFuncWithSingleInputRef;
}
