{
  writeLock.lock();
  try {
    nodeEnablerFuture=nodeEnabledExecutor.submit(nodeEnablerCallable);
    schedulerFuture=schedulerExecutor.submit(schedulerCallable);
    registry.start();
    activeInstances=registry.getInstances();
    for (    ServiceInstance inst : activeInstances.getAll().values()) {
      addNode(inst,new NodeInfo(inst,nodeBlacklistConf,clock,numSchedulableTasksPerNode));
    }
  }
  finally {
    writeLock.unlock();
  }
}
