{
  int memory=0;
  int vcores=0;
  readLock.lock();
  try {
    for (    ServiceInstance inst : instanceToNodeMap.keySet()) {
      if (inst.isAlive()) {
        Resource r=inst.getResource();
        memory+=r.getMemory();
        vcores+=r.getVirtualCores();
      }
    }
  }
  finally {
    readLock.unlock();
  }
  return Resource.newInstance(memory,vcores);
}
