{
  if (!isValidHierarchy(current,stop)) {
    return false;
  }
  for (; current != null && current != stop; current=current.getParent()) {
    try {
      closeClassLoader(current);
    }
 catch (    IOException e) {
      LOG.info("Failed to close class loader " + current + Arrays.toString(((URLClassLoader)current).getURLs()),e);
    }
  }
  return true;
}
