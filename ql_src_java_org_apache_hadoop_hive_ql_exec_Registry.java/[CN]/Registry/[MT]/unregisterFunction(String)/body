{
  lock.lock();
  try {
    functionName=functionName.toLowerCase();
    FunctionInfo fi=mFunctions.get(functionName);
    if (fi != null) {
      if (fi.isBuiltIn()) {
        throw new HiveException(ErrorMsg.DROP_NATIVE_FUNCTION.getMsg(functionName));
      }
      mFunctions.remove(functionName);
      fi.discarded();
      if (fi.isPersistent()) {
        removePersistentFunctionUnderLock(fi);
      }
    }
  }
  finally {
    lock.unlock();
  }
}
