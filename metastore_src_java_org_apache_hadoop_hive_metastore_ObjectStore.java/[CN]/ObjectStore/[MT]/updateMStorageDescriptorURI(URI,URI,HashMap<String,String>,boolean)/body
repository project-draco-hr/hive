{
  int count=0;
  Query query=pm.newQuery(MStorageDescriptor.class);
  List<MStorageDescriptor> mSDSs=(List<MStorageDescriptor>)query.execute();
  pm.retrieveAll(mSDSs);
  LOG.info("Looking for location in LOCATION field in SDS table...");
  for (  MStorageDescriptor mSDS : mSDSs) {
    URI locationURI=null;
    try {
      locationURI=new URI(mSDS.getLocation());
    }
 catch (    URISyntaxException e) {
      LOG.error("Encountered error while validating location URI" + e.getLocalizedMessage());
    }
    if (locationURI != null) {
      if (shouldUpdateURI(locationURI,oldLoc)) {
        String tblLoc=mSDS.getLocation().replaceAll(oldLoc.toString(),newLoc.toString());
        if (dryRun) {
          updateLocations.put(locationURI.toString(),tblLoc);
        }
 else {
          mSDS.setLocation(tblLoc);
        }
        count++;
      }
    }
  }
  LOG.info("Found " + count + " records to update");
  return count;
}
