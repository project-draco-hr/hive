{
  boolean commited=false;
  Query query=null;
  try {
    openTransaction();
    long tmp=System.currentTimeMillis() / 1000 - olderThan;
    int tooOld=(tmp > Integer.MAX_VALUE) ? 0 : (int)tmp;
    query=pm.newQuery(MNotificationLog.class,"eventTime < tooOld");
    query.declareParameters("java.lang.Integer tooOld");
    Collection<MNotificationLog> toBeRemoved=(Collection)query.execute(tooOld);
    if (toBeRemoved != null && toBeRemoved.size() > 0) {
      pm.deletePersistentAll(toBeRemoved);
    }
    commited=commitTransaction();
  }
  finally {
    if (!commited) {
      rollbackTransaction();
    }
    if (query != null) {
      query.closeAll();
    }
  }
}
