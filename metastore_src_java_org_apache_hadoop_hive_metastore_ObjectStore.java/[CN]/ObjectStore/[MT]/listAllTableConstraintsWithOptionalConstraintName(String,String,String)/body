{
  List<MConstraint> mConstraints=null;
  List<String> constraintNames=new ArrayList<String>();
  Query query=null;
  try {
    query=pm.newQuery("select constraintName from org.apache.hadoop.hive.metastore.model.MConstraint  where " + "((parentTable.tableName == ptblname && parentTable.database.name == pdbname) || " + "(childTable != null && childTable.tableName == ctblname && "+ "childTable.database.name == cdbname)) "+ (constraintname != null ? " && constraintName == constraintname" : ""));
    query.declareParameters("java.lang.String ptblname, java.lang.String pdbname," + "java.lang.String ctblname, java.lang.String cdbname" + (constraintname != null ? ", java.lang.String constraintname" : ""));
    Collection<?> constraintNamesColl=constraintname != null ? ((Collection<?>)query.executeWithArray(tableName,dbName,tableName,dbName,constraintname)) : ((Collection<?>)query.executeWithArray(tableName,dbName,tableName,dbName));
    for (Iterator<?> i=constraintNamesColl.iterator(); i.hasNext(); ) {
      String currName=(String)i.next();
      constraintNames.add(currName);
    }
    query=pm.newQuery(MConstraint.class);
    query.setFilter("param.contains(constraintName)");
    query.declareParameters("java.util.Collection param");
    Collection<?> constraints=(Collection<?>)query.execute(constraintNames);
    mConstraints=new ArrayList<MConstraint>();
    for (Iterator<?> i=constraints.iterator(); i.hasNext(); ) {
      MConstraint currConstraint=(MConstraint)i.next();
      mConstraints.add(currConstraint);
    }
  }
  finally {
    if (query != null) {
      query.closeAll();
    }
  }
  return mConstraints;
}
