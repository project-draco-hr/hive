{
  MDatabase mdb=null;
  boolean commited=false;
  Query query=null;
  try {
    openTransaction();
    name=HiveStringUtils.normalizeIdentifier(name);
    query=pm.newQuery(MDatabase.class,"name == dbname");
    query.declareParameters("java.lang.String dbname");
    query.setUnique(true);
    mdb=(MDatabase)query.execute(name);
    pm.retrieve(mdb);
    commited=commitTransaction();
  }
  finally {
    if (!commited) {
      rollbackTransaction();
    }
    if (query != null) {
      query.closeAll();
    }
  }
  if (mdb == null) {
    throw new NoSuchObjectException("There is no database named " + name);
  }
  return mdb;
}
