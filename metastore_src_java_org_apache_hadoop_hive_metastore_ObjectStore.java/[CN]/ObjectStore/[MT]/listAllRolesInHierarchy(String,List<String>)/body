{
  List<MRoleMap> ret=new ArrayList<MRoleMap>();
  if (userName != null) {
    ret.addAll(listMRoles(userName,PrincipalType.USER));
  }
  if (groupNames != null) {
    for (    String groupName : groupNames) {
      ret.addAll(listMRoles(groupName,PrincipalType.GROUP));
    }
  }
  Set<String> roleNames=new HashSet<String>();
  getAllRoleAncestors(roleNames,ret);
  return roleNames;
}
