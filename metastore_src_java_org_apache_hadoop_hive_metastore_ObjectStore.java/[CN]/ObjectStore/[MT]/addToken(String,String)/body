{
  LOG.debug("Begin executing addToken");
  boolean committed=false;
  MDelegationToken token;
  try {
    openTransaction();
    token=getTokenFrom(tokenId);
    if (token == null) {
      pm.makePersistent(new MDelegationToken(tokenId,delegationToken));
    }
    committed=commitTransaction();
  }
  finally {
    if (!committed) {
      rollbackTransaction();
    }
  }
  LOG.debug("Done executing addToken with status : " + committed);
  return committed && (token == null);
}
