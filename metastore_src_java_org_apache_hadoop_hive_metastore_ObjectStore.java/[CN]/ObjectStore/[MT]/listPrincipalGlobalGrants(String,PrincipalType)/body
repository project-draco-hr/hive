{
  boolean commited=false;
  Query query=null;
  List<MGlobalPrivilege> userNameDbPriv=new ArrayList<MGlobalPrivilege>();
  try {
    List<MGlobalPrivilege> mPrivs=null;
    openTransaction();
    if (principalName != null) {
      query=pm.newQuery(MGlobalPrivilege.class,"principalName == t1 && principalType == t2 ");
      query.declareParameters("java.lang.String t1, java.lang.String t2");
      mPrivs=(List<MGlobalPrivilege>)query.executeWithArray(principalName,principalType.toString());
      pm.retrieveAll(mPrivs);
    }
    commited=commitTransaction();
    if (mPrivs != null) {
      userNameDbPriv.addAll(mPrivs);
    }
  }
  finally {
    if (!commited) {
      rollbackTransaction();
    }
    if (query != null) {
      query.closeAll();
    }
  }
  return userNameDbPriv;
}
