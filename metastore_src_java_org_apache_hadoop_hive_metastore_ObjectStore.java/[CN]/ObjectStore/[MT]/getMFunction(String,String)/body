{
  MFunction mfunc=null;
  boolean commited=false;
  try {
    openTransaction();
    db=HiveStringUtils.normalizeIdentifier(db);
    function=HiveStringUtils.normalizeIdentifier(function);
    Query query=pm.newQuery(MFunction.class,"functionName == function && database.name == db");
    query.declareParameters("java.lang.String function, java.lang.String db");
    query.setUnique(true);
    mfunc=(MFunction)query.execute(function,db);
    pm.retrieve(mfunc);
    commited=commitTransaction();
  }
  finally {
    if (!commited) {
      rollbackTransaction();
    }
  }
  return mfunc;
}
