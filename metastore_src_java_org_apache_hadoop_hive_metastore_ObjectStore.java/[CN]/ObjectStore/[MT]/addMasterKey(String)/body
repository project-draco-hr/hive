{
  LOG.debug("Begin executing addMasterKey");
  boolean committed=false;
  MMasterKey masterKey=new MMasterKey(key);
  try {
    openTransaction();
    pm.makePersistent(masterKey);
    committed=commitTransaction();
  }
  finally {
    if (!committed) {
      rollbackTransaction();
    }
  }
  LOG.debug("Done executing addMasterKey with status : " + committed);
  if (committed) {
    return ((IntIdentity)pm.getObjectId(masterKey)).getKey();
  }
 else {
    throw new MetaException("Failed to add master key.");
  }
}
