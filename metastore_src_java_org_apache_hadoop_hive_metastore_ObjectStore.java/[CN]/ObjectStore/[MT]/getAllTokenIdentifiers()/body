{
  LOG.debug("Begin executing getAllTokenIdentifiers");
  boolean committed=false;
  Query query=null;
  List<String> tokenIdents=new ArrayList<String>();
  try {
    openTransaction();
    query=pm.newQuery(MDelegationToken.class);
    List<MDelegationToken> tokens=(List<MDelegationToken>)query.execute();
    pm.retrieveAll(tokens);
    committed=commitTransaction();
    for (    MDelegationToken token : tokens) {
      tokenIdents.add(token.getTokenIdentifier());
    }
    return tokenIdents;
  }
  finally {
    LOG.debug("Done executing getAllTokenIdentifers with status : " + committed);
    if (!committed) {
      rollbackTransaction();
    }
    if (query != null) {
      query.closeAll();
    }
  }
}
