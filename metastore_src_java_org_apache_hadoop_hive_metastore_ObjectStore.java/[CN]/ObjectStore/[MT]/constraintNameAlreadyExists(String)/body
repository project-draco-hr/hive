{
  boolean commited=false;
  Query constraintExistsQuery=null;
  String constraintNameIfExists=null;
  try {
    openTransaction();
    name=HiveStringUtils.normalizeIdentifier(name);
    constraintExistsQuery=pm.newQuery(MConstraint.class,"constraintName == name");
    constraintExistsQuery.declareParameters("java.lang.String name");
    constraintExistsQuery.setUnique(true);
    constraintExistsQuery.setResult("name");
    constraintNameIfExists=(String)constraintExistsQuery.execute(name);
    commited=commitTransaction();
  }
  finally {
    if (!commited) {
      rollbackTransaction();
    }
    if (constraintExistsQuery != null) {
      constraintExistsQuery.closeAll();
    }
  }
  return constraintNameIfExists != null && !constraintNameIfExists.isEmpty();
}
