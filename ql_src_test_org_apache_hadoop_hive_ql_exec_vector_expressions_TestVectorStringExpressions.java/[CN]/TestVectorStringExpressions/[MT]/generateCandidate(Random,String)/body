{
  StringBuffer sb=new StringBuffer();
  final StringTokenizer tokens=new StringTokenizer(pattern,"%");
  final boolean leftAnchor=pattern.startsWith("%");
  final boolean rightAnchor=pattern.endsWith("%");
  for (int i=0; tokens.hasMoreTokens(); i++) {
    String chunk=tokens.nextToken();
    if (leftAnchor && i == 0) {
      sb.append(randomizePattern(control,chunk));
    }
 else     if (rightAnchor && tokens.hasMoreTokens() == false) {
      sb.append(randomizePattern(control,chunk));
    }
 else {
      sb.append(randomizePattern(control,chunk));
    }
  }
  return sb.toString();
}
