{
  if (!doForceRefresh && lastKnownInstances != null) {
    return new ArrayList<>(lastKnownInstances);
  }
  if (activeInstances == null) {
    registry.start();
    activeInstances=registry.getInstances();
  }
  Map<String,ServiceInstance> daemons=activeInstances.getAll();
  if (daemons == null || daemons.isEmpty()) {
    throw new RuntimeException("No LLAPs found");
  }
  lastKnownInstances=daemons.values();
  return new ArrayList<ServiceInstance>(lastKnownInstances);
}
