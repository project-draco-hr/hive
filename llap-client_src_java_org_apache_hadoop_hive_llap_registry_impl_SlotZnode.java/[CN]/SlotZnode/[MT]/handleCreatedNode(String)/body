{
  while (true) {
    State localState=state.get();
    if (localState == State.CLOSED || localState == State.LATENT)     return;
    if (state.compareAndSet(localState,State.AFTER_SELECTION))     break;
  }
  nodePath.set(path);
  watchNode();
  CountDownLatch localLatch=initialCreateLatch.getAndSet(null);
  if (localLatch != null) {
    localLatch.countDown();
  }
  LOG.info("Acquired the slot znode {}{}",path,localLatch != null ? "; this is the initial assignment" : "");
}
