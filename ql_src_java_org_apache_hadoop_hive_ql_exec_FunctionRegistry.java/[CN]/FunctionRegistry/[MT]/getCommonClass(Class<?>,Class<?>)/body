{
  if (a.equals(b))   return a;
  if (a.isAssignableFrom(b))   return a;
  if (b.isAssignableFrom(a))   return b;
  if (Number.class.isAssignableFrom(a) && b.equals(String.class))   return Double.class;
  if (Number.class.isAssignableFrom(b) && a.equals(String.class))   return Double.class;
  if (FunctionRegistry.implicitConvertable(a,b))   return b;
  if (FunctionRegistry.implicitConvertable(b,a))   return a;
  return null;
}
