{
  Path attemptDir=new Path(logDir,attemptInfo.id);
  fs.mkdirs(attemptDir);
  for (  String type : new String[]{"stderr","stdout","syslog"}) {
    String fileInURL="tasklog?attemptid=" + attemptInfo.id + "&plaintext=true&filter="+ type;
    URL url=new URL(attemptInfo.baseUrl.getProtocol(),attemptInfo.baseUrl.getHost(),attemptInfo.baseUrl.getPort(),"/" + fileInURL);
    URLConnection urlConnection=url.openConnection();
    BufferedReader reader=null;
    PrintWriter writer=null;
    try {
      reader=new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
      writer=new PrintWriter(new OutputStreamWriter(fs.create(new Path(attemptDir,type))));
      String line;
      while ((line=reader.readLine()) != null) {
        writer.println(line);
      }
    }
  finally {
      if (reader != null) {
        reader.close();
      }
      if (writer != null) {
        writer.close();
      }
    }
  }
}
