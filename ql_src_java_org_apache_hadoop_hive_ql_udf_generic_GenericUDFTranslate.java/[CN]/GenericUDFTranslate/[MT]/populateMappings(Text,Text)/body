{
  replacementMap.clear();
  deletionSet.clear();
  ByteBuffer fromBytes=ByteBuffer.wrap(from.getBytes(),0,from.getLength());
  ByteBuffer toBytes=ByteBuffer.wrap(to.getBytes(),0,to.getLength());
  while (fromBytes.hasRemaining()) {
    int fromCodePoint=Text.bytesToCodePoint(fromBytes);
    if (toBytes.hasRemaining()) {
      int toCodePoint=Text.bytesToCodePoint(toBytes);
      if (replacementMap.containsKey(fromCodePoint) || deletionSet.contains(fromCodePoint)) {
        continue;
      }
      replacementMap.put(fromCodePoint,toCodePoint);
    }
 else {
      if (replacementMap.containsKey(fromCodePoint) || deletionSet.contains(fromCodePoint)) {
        continue;
      }
      deletionSet.add(fromCodePoint);
    }
  }
}
