{
  try {
    return ShimLoader.getHadoopShims().doAs(ugi,new PrivilegedExceptionAction<Object>(){
      @Override public Object run() throws HiveSQLException {
        try {
          return method.invoke(base,args);
        }
 catch (        InvocationTargetException e) {
          if (e.getCause() instanceof HiveSQLException) {
            throw (HiveSQLException)e.getCause();
          }
 else {
            throw new RuntimeException(e.getCause());
          }
        }
catch (        IllegalArgumentException e) {
          throw new RuntimeException(e);
        }
catch (        IllegalAccessException e) {
          throw new RuntimeException(e);
        }
      }
    }
);
  }
 catch (  UndeclaredThrowableException e) {
    Throwable innerException=e.getCause();
    if (innerException instanceof PrivilegedActionException) {
      throw innerException.getCause();
    }
 else {
      throw e.getCause();
    }
  }
}
