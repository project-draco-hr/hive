def patch_hive(patches=[], revision=None):
    local.cd(code_path)
    if (revision is not None):
        print('\n-- Patching Hive repo using a Differential revision\n')
        revision = revision.upper()
        if (not revision.startswith('D')):
            revision = ('D' + revision)
        local.run('arc patch "{0}"'.format(revision))
    if patches:
        print('\n-- Patching Hive repo using a patch from local file system\n')
        for patch in patches:
            local.run('patch -f -p0 < "{0}"'.format(patch))
