{
  final int length=input.readInt(true);
  Class<?> componentType=kryo.readClass(input).getType();
  if (componentType.isPrimitive()) {
    componentType=getPrimitiveWrapperClass(componentType);
  }
  try {
    final Object items=Array.newInstance(componentType,length);
    for (int i=0; i < length; i++) {
      Array.set(items,i,kryo.readClassAndObject(input));
    }
    return Arrays.asList((Object[])items);
  }
 catch (  final Exception e) {
    throw new RuntimeException(e);
  }
}
