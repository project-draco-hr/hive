{
  AggregationBuffer[] aggs=null;
  Object[][] lastInvoke=null;
  boolean keysAreEqual=(currentKeys != null && newKeys != null) ? newKeyStructEqualComparer.areEqual(currentKeys,newKeys) : false;
  if (currentKeys != null && !keysAreEqual) {
    forward(currentKeys,aggregations);
    countAfterReport=0;
  }
  if (currentKeys == null || !keysAreEqual) {
    if (currentKeys == null) {
      currentKeys=new ArrayList<Object>(keyFields.length);
    }
    deepCopyElements(keyObjects,keyObjectInspectors,currentKeys,ObjectInspectorCopyOption.WRITABLE);
    resetAggregations(aggregations);
    for (int i=0; i < aggregationsParametersLastInvoke.length; i++) {
      aggregationsParametersLastInvoke[i]=null;
    }
  }
  aggs=aggregations;
  lastInvoke=aggregationsParametersLastInvoke;
  updateAggregations(aggs,row,rowInspector,false,false,lastInvoke);
}
