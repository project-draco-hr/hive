{
  ModuleConfig moduleConfig=getModuleConfig(context,"irrelevant",DEFAULT_PROP_BATCH_SIZE);
  String subDirForPrefix=context.getString(PROP_SUBDIR_FOR_PREFIX,DEFAULT_PROP_SUBDIR_FOR_PREFIX);
  Preconditions.checkArgument(StringUtils.isNotBlank(subDirForPrefix) && !subDirForPrefix.contains("/"));
  Context modulesContext=new Context(context.getSubProperties(Joiner.on(".").join(PROP_MODULE_LIST,"")));
  Set<String> includedModules=getProperty(modulesContext,PROP_INCLUDE);
  Set<String> excludedModules=getProperty(modulesContext,PROP_EXCLUDE);
  if (!includedModules.isEmpty() && !excludedModules.isEmpty()) {
    throw new IllegalArgumentException(String.format("%s and %s are mutually exclusive for property %s. Provided values: included=%s, excluded=%s",PROP_INCLUDE,PROP_EXCLUDE,PROP_MODULE_LIST,includedModules,excludedModules));
  }
  return new RootConfig(includedModules,excludedModules,moduleConfig.include,moduleConfig.exclude,moduleConfig.skipBatching,moduleConfig.isolate,moduleConfig.batchSize,subDirForPrefix);
}
