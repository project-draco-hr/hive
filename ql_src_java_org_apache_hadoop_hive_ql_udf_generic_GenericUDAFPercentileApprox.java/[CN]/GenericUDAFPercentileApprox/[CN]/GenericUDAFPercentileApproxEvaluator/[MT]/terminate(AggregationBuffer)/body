{
  PercentileAggBuf myagg=(PercentileAggBuf)agg;
  if (myagg.histogram.getUsedBins() < 1) {
    return null;
  }
 else {
    ArrayList<DoubleWritable> result=new ArrayList<DoubleWritable>();
    assert(myagg.quantiles != null);
    for (int i=0; i < myagg.quantiles.length; i++) {
      result.add(new DoubleWritable(myagg.histogram.quantile(myagg.quantiles[i])));
    }
    if (myagg.quantiles.length == 1) {
      return result.get(0);
    }
 else {
      return result;
    }
  }
}
