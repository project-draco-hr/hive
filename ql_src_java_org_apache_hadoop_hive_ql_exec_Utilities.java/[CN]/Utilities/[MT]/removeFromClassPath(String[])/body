{
  Thread curThread=Thread.currentThread();
  URLClassLoader loader=(URLClassLoader)curThread.getContextClassLoader();
  Set<URL> newPath=new HashSet<URL>(Arrays.asList(loader.getURLs()));
  for (  String onestr : pathsToRemove) {
    URL oneurl=urlFromPathString(onestr);
    if (oneurl != null) {
      newPath.remove(oneurl);
    }
  }
  JavaUtils.closeClassLoader(loader);
  Registry reg=SessionState.getRegistry();
  if (reg != null) {
    reg.removeFromUDFLoaders(loader);
  }
  loader=new UDFClassLoader(newPath.toArray(new URL[0]));
  curThread.setContextClassLoader(loader);
  SessionState.get().getConf().setClassLoader(loader);
}
