{
  final int MAX_ATTEMPS=30;
  for (int i=0; i < MAX_ATTEMPS; i++) {
    String tempDirName="tmp_" + ((int)(100000 * Math.random()));
    File tempDir=new File(baseDir,tempDirName);
    if (tempDir.mkdir()) {
      return tempDir;
    }
  }
  throw new IllegalStateException("Failed to create a temp dir under " + baseDir + " Giving up after "+ MAX_ATTEMPS+ " attemps");
}
