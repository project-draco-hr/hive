{
  String origUmask=null;
  if (recursive) {
    origUmask=conf.get("fs.permissions.umask-mode");
    conf.set("fs.permissions.umask-mode","000");
  }
  FileSystem fs=mkdir.getFileSystem(conf);
  boolean retval=fs.mkdirs(mkdir,fsPermission);
  if (recursive) {
    if (origUmask != null) {
      conf.set("fs.permissions.umask-mode",origUmask);
    }
 else {
      conf.unset("fs.permissions.umask-mode");
    }
  }
  return retval;
}
