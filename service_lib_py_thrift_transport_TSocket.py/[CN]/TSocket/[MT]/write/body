def write(self, buff):
    if (not self.handle):
        raise TTransportException(TTransportException.NOT_OPEN, 'Transport not open')
    sent = 0
    have = len(buff)
    while (sent < have):
        plus = self.handle.send(buff)
        if (plus == 0):
            raise TTransportException('TSocket sent 0 bytes')
        sent += plus
        buff = buff[plus:]
