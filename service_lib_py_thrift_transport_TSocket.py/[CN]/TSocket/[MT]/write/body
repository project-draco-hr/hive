def write(self, buff):
    sent = 0
    have = len(buff)
    while (sent < have):
        plus = self.handle.send(buff)
        if (plus == 0):
            raise TTransportException('TSocket sent 0 bytes')
        sent += plus
        buff = buff[plus:]
