{
  if (result != null && error != null) {
    throw new IllegalArgumentException("Either result or error should be set.");
  }
synchronized (monitor) {
    this.result=(T)result;
    this.error=error;
    this.completed=true;
    monitor.notifyAll();
  }
}
