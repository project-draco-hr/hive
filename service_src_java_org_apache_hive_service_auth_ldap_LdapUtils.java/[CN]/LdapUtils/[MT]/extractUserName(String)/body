{
  if (!isDn(userDn) && !hasDomain(userDn)) {
    return userDn;
  }
  int domainIdx=ServiceUtils.indexOfDomainMatch(userDn);
  if (domainIdx > 0) {
    return userDn.substring(0,domainIdx);
  }
  if (userDn.contains("=")) {
    return userDn.substring(userDn.indexOf("=") + 1,userDn.indexOf(","));
  }
  return userDn;
}
