{
  if (obj instanceof Collection<?>) {
    return directSize + perEntryOverhead * ((Collection<?>)obj).size();
  }
 else   if (obj instanceof Map<?,?>) {
    return directSize + perEntryOverhead * ((Map<?,?>)obj).size();
  }
 else {
    throw new AssertionError(obj);
  }
}
