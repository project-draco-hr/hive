{
  if (obj instanceof Collection<?>) {
    Collection<?> c=(Collection<?>)obj;
    int overhead=estimateOverhead(c.size()), elements=estimateCollectionElements(parent,c,null,uniqueObjects);
    return overhead + elements + memoryModel.object();
  }
 else   if (obj instanceof Map<?,?>) {
    Map<?,?> m=(Map<?,?>)obj;
    int overhead=estimateOverhead(m.size()), elements=estimateMapElements(parent,m,null,uniqueObjects);
    return overhead + elements + memoryModel.object();
  }
  throw new AssertionError(obj.getClass().getName());
}
