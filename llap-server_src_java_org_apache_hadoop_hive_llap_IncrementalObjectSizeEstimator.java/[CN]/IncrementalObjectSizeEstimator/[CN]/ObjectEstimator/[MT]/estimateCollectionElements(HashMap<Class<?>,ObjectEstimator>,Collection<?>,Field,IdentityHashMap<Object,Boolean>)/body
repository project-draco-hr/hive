{
  ObjectEstimator lastEstimator=null;
  Class<?> lastClass=null;
  int result=0;
  for (  Object element : c) {
    if (element == null)     continue;
    if (null != uniqueObjects.put(element,Boolean.TRUE))     continue;
    Class<?> elementClass=element.getClass();
    if (lastClass != elementClass) {
      lastClass=elementClass;
      lastEstimator=parent.get(lastClass);
      if (lastEstimator == null) {
        throw new AssertionError("Don't know how to measure element " + lastClass.getName() + " from "+ field);
      }
    }
    result+=lastEstimator.estimate(element,parent,uniqueObjects);
  }
  return result;
}
