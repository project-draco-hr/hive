{
  if (sessionState != null) {
    sessionState.resetThreadName();
  }
  SessionState.detachSession();
  if (ThreadWithGarbageCleanup.currentThread() instanceof ThreadWithGarbageCleanup) {
    ThreadWithGarbageCleanup currentThread=(ThreadWithGarbageCleanup)ThreadWithGarbageCleanup.currentThread();
    currentThread.cacheThreadLocalRawStore();
  }
  if (userAccess) {
    lastAccessTime=System.currentTimeMillis();
  }
  activeCalls--;
  if (activeCalls == 0 && opHandleSet.isEmpty()) {
    lastIdleTime=System.currentTimeMillis();
  }
}
