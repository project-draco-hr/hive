{
  String taskId=wrappedCallback.getRequestId();
  TaskRunnerCallable task=idToTaskMap.get(taskId);
  String state=reason == null ? "FAILED" : reason.name();
  if (enablePreemption && task != null) {
    removeTaskFromPreemptionList(task,taskId);
    if (isDebugEnabled) {
      LOG.debug(task.getRequestId() + " request " + state+ "! Removed from preemption list.");
    }
  }
  numSlotsAvailable.incrementAndGet();
  if (!waitQueue.isEmpty()) {
synchronized (waitLock) {
      waitLock.notify();
    }
  }
}
