{
  if (awaitTermination) {
    if (isDebugEnabled) {
      LOG.debug("awaitTermination: " + awaitTermination + " shutting down task executor"+ " service gracefully");
    }
    executorService.shutdown();
    try {
      if (!executorService.awaitTermination(1,TimeUnit.MINUTES)) {
        executorService.shutdownNow();
      }
    }
 catch (    InterruptedException e) {
      executorService.shutdownNow();
    }
    waitQueueExecutorService.shutdown();
    try {
      if (!waitQueueExecutorService.awaitTermination(1,TimeUnit.MINUTES)) {
        waitQueueExecutorService.shutdownNow();
      }
    }
 catch (    InterruptedException e) {
      waitQueueExecutorService.shutdownNow();
    }
  }
 else {
    if (isDebugEnabled) {
      LOG.debug("awaitTermination: " + awaitTermination + " shutting down task executor"+ " service immediately");
    }
    executorService.shutdownNow();
    waitQueueExecutorService.shutdownNow();
  }
}
