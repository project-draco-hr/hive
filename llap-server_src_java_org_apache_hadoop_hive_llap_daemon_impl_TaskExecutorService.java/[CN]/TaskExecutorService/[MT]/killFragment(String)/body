{
synchronized (lock) {
    TaskWrapper taskWrapper=knownTasks.remove(fragmentId);
    if (taskWrapper != null) {
      if (taskWrapper.isInWaitQueue()) {
        if (isDebugEnabled) {
          LOG.debug("Removing {} from waitQueue",fragmentId);
        }
        taskWrapper.setIsInWaitQueue(false);
        if (waitQueue.remove(taskWrapper)) {
          if (metrics != null) {
            metrics.setExecutorNumQueuedRequests(waitQueue.size());
          }
        }
      }
      if (taskWrapper.isInPreemptionQueue()) {
        if (isDebugEnabled) {
          LOG.debug("Removing {} from preemptionQueue",fragmentId);
        }
        removeFromPreemptionQueue(taskWrapper);
      }
      taskWrapper.getTaskRunnerCallable().killTask();
    }
 else {
      LOG.info("Ignoring killFragment request for {} since it isn't known",fragmentId);
    }
    lock.notify();
  }
}
