{
  if (threadMXBean.isThreadCpuTimeSupported() && threadMXBean.isThreadCpuTimeEnabled()) {
    final long[] ids=threadMXBean.getAllThreadIds();
    final ThreadInfo[] infos=threadMXBean.getThreadInfo(ids);
    for (int i=0; i < ids.length; i++) {
      ThreadInfo threadInfo=infos[i];
      String threadName=threadInfo.getThreadName();
      long threadId=ids[i];
      for (int j=0; j < numExecutors; j++) {
        if (threadName.equals(ContainerRunnerImpl.THREAD_NAME_FORMAT_PREFIX + j)) {
          executorThreadCpuTime[j].set(threadMXBean.getThreadCpuTime(threadId));
          executorThreadUserTime[j].set(threadMXBean.getThreadUserTime(threadId));
        }
      }
    }
    for (int i=0; i < numExecutors; i++) {
      rb.addGauge(cpuMetricsInfoMap.get(i),executorThreadCpuTime[i].value());
      rb.addGauge(userMetricsInfoMap.get(i),executorThreadUserTime[i].value());
    }
  }
}
