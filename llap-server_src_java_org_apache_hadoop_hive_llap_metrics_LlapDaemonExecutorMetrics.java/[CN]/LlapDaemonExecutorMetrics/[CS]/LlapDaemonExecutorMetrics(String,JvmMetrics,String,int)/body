{
  this.name=displayName;
  this.jvmMetrics=jm;
  this.sessionId=sessionId;
  this.registry=new MetricsRegistry("LlapDaemonExecutorRegistry");
  this.registry.tag(ProcessName,MetricsUtils.METRICS_PROCESS_NAME).tag(SessionId,sessionId);
  this.numExecutors=numExecutors;
  this.threadMXBean=ManagementFactory.getThreadMXBean();
  this.executorThreadCpuTime=new MutableGaugeLong[numExecutors];
  this.executorThreadUserTime=new MutableGaugeLong[numExecutors];
  this.cpuMetricsInfoMap=new ConcurrentHashMap<>();
  this.userMetricsInfoMap=new ConcurrentHashMap<>();
  for (int i=0; i < numExecutors; i++) {
    MetricsInfo mic=new LlapDaemonCustomMetricsInfo(ExecutorThreadCPUTime.name() + "_" + i,ExecutorThreadCPUTime.description());
    MetricsInfo miu=new LlapDaemonCustomMetricsInfo(ExecutorThreadUserTime.name() + "_" + i,ExecutorThreadUserTime.description());
    this.cpuMetricsInfoMap.put(i,mic);
    this.userMetricsInfoMap.put(i,miu);
    this.executorThreadCpuTime[i]=registry.newGauge(mic,0L);
    this.executorThreadUserTime[i]=registry.newGauge(miu,0L);
  }
}
