'Implementation of non-blocking server.\n\nThe main idea of the server is reciving and sending requests\nonly from main thread.\n\nIt also makes thread pool server in tasks terms, not connections.\n'
import threading
import socket
import Queue
import select
import struct
import logging
from thrift.transport import TTransport
from thrift.protocol.TBinaryProtocol import TBinaryProtocolFactory
__all__ = ['TNonblockingServer']
WAIT_LEN = 0
WAIT_MESSAGE = 1
WAIT_PROCESS = 2
SEND_ANSWER = 3
CLOSED = 4
