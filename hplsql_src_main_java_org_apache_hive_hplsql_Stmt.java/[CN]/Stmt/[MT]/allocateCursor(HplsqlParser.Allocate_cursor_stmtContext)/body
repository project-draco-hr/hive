{
  trace(ctx,"ALLOCATE CURSOR");
  String name=ctx.ident(0).getText();
  Var cur=null;
  if (ctx.T_PROCEDURE() != null) {
    cur=exec.consumeReturnCursor(ctx.ident(1).getText());
  }
 else   if (ctx.T_RESULT() != null) {
    cur=exec.findVariable(ctx.ident(1).getText());
    if (cur != null && cur.type != Type.RS_LOCATOR) {
      cur=null;
    }
  }
  if (cur == null) {
    trace(ctx,"Cursor for procedure not found: " + name);
    exec.signal(Signal.Type.SQLEXCEPTION);
    return -1;
  }
  exec.addVariable(new Var(name,Type.CURSOR,cur.value));
  return 0;
}
