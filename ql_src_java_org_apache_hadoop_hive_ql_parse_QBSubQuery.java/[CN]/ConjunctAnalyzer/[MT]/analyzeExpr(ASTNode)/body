{
  ExprNodeDesc exprNode;
  if (expr.getType() == HiveParser.DOT) {
    ASTNode dot=firstDot(expr);
    exprNode=resolveDot(dot);
    if (exprNode != null) {
      return ExprType.REFERS_PARENT;
    }
    return ExprType.REFERS_SUBQUERY;
  }
 else   if (expr.getType() == HiveParser.TOK_TABLE_OR_COL) {
    return ExprType.REFERS_SUBQUERY;
  }
 else {
    ExprType exprType=ExprType.REFERS_NONE;
    int cnt=expr.getChildCount();
    for (int i=0; i < cnt; i++) {
      ASTNode child=(ASTNode)expr.getChild(i);
      exprType=exprType.combine(analyzeExpr(child));
    }
    return exprType;
  }
}
