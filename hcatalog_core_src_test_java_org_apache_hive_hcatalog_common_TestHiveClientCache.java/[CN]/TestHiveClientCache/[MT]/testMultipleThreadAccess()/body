{
  final HiveClientCache cache=new HiveClientCache(1000);
class GetHiveClient implements Callable<HiveMetaStoreClient> {
    @Override public HiveMetaStoreClient call() throws IOException, MetaException, LoginException {
      return cache.get(hiveConf);
    }
  }
  ExecutorService executor=Executors.newFixedThreadPool(2);
  Callable<HiveMetaStoreClient> worker1=new GetHiveClient();
  Callable<HiveMetaStoreClient> worker2=new GetHiveClient();
  Future<HiveMetaStoreClient> clientFuture1=executor.submit(worker1);
  Future<HiveMetaStoreClient> clientFuture2=executor.submit(worker2);
  HiveMetaStoreClient client1=clientFuture1.get();
  HiveMetaStoreClient client2=clientFuture2.get();
  assertNotNull(client1);
  assertNotNull(client2);
  assertNotSame(client1,client2);
}
