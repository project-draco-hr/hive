{
  HiveClientCache cache=new HiveClientCache(1000);
  HiveClientCache.ICacheableMetaStoreClient client=(HiveClientCache.ICacheableMetaStoreClient)cache.get(hiveConf);
  assertNotNull(client);
  client.close();
  hiveConf.setIntVar(HiveConf.ConfVars.DYNAMICPARTITIONMAXPARTS,10);
  HiveClientCache.ICacheableMetaStoreClient client2=(HiveClientCache.ICacheableMetaStoreClient)cache.get(hiveConf);
  assertNotNull(client2);
  assertSame(client,client2);
  assertEquals(client.getUsers(),client2.getUsers());
  client2.close();
}
