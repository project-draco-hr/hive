{
  Logger root=Logger.getRootLogger();
  Layout layout=null;
  Enumeration<?> appenders=root.getAllAppenders();
  while (appenders.hasMoreElements()) {
    Appender ap=(Appender)appenders.nextElement();
    if (ap.getClass().equals(ConsoleAppender.class)) {
      layout=ap.getLayout();
      break;
    }
  }
  if (layout == null) {
    layout=new PatternLayout(DEFAULT_LAYOUT_PATTERN);
    LOG.info("Cannot find a Layout from a ConsoleAppender. Using default Layout pattern.");
  }
  Appender ap=new LogDivertAppender(layout,this);
  root.addAppender(ap);
}
