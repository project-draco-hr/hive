{
  int hdrSize=headerSize();
  ByteBuffer buf=ByteBuffer.allocate(hdrSize);
  buf.putInt(l.startOffset);
  buf.putInt(l.bytesUsed);
  buf.putInt(l.currentSize);
  buf.putLong(l.lastModified);
  buf.flip();
  ByteBuffer offsetB=ByteBuffer.allocate((Integer.SIZE / Byte.SIZE) * 2 * l.currentSize);
  IntBuffer iB=offsetB.asIntBuffer();
  iB.put(l.offsetsArray,0,l.currentSize * 2);
  ByteBuffer bytesB=ByteBuffer.wrap(l.bytes,0,l.bytesUsed);
  ByteBuffer[] bufs=new ByteBuffer[]{buf,offsetB,bytesB};
  FileOutputStream fos=new FileOutputStream(f);
  try {
    FileChannel fc=fos.getChannel();
    while (fc.write(bufs,0,bufs.length) > 0) {
      ;
    }
  }
  finally {
    fos.close();
  }
}
