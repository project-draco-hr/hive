{
  int remaining=buffer.remaining();
  len=len <= remaining ? len : remaining;
  buffer.get(b,off,len);
  return len;
}
