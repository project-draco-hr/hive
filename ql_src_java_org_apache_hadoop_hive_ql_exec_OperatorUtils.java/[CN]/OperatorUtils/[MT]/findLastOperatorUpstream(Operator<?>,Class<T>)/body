{
  Operator<?> currentOp=op;
  T lastOp=null;
  while (currentOp != null) {
    if (clazz.isInstance(currentOp)) {
      lastOp=(T)currentOp;
    }
    if (currentOp.getParentOperators().size() == 1) {
      currentOp=currentOp.getParentOperators().get(0);
    }
 else {
      currentOp=null;
    }
  }
  return lastOp;
}
