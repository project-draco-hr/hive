{
  if (!visited.add(node)) {
    return;
  }
  if (clazz.isInstance(node)) {
    function.apply(clazz.cast(node));
  }
  if (node.getChildren() != null) {
    for (    Node child : node.getChildren()) {
      iterate(child,clazz,function,visited);
    }
  }
}
