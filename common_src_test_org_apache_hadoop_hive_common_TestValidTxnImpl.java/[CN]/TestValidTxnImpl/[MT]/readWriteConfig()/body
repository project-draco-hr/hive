{
  long[] exceptions=new long[1000];
  for (int i=0; i < 1000; i++)   exceptions[i]=i + 100;
  ValidTxnList txnList=new ValidTxnListImpl(exceptions,2000);
  String str=txnList.writeToString();
  Configuration conf=new Configuration();
  conf.set(ValidTxnList.VALID_TXNS_KEY,str);
  File tmpFile=File.createTempFile("TestValidTxnImpl","readWriteConfig");
  DataOutputStream out=new DataOutputStream(new FileOutputStream(tmpFile));
  conf.write(out);
  out.close();
  DataInputStream in=new DataInputStream(new FileInputStream(tmpFile));
  Configuration newConf=new Configuration();
  newConf.readFields(in);
  Assert.assertEquals(str,newConf.get(ValidTxnList.VALID_TXNS_KEY));
}
