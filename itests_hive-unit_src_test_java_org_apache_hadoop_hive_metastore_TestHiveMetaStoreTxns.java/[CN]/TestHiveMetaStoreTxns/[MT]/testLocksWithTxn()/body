{
  long txnid=client.openTxn("me");
  LockRequestBuilder rqstBuilder=new LockRequestBuilder();
  rqstBuilder.setTransactionId(txnid).addLockComponent(new LockComponentBuilder().setDbName("mydb").setTableName("mytable").setPartitionName("mypartition").setSemiShared().build()).addLockComponent(new LockComponentBuilder().setDbName("mydb").setTableName("yourtable").setSemiShared().build()).addLockComponent(new LockComponentBuilder().setDbName("yourdb").setShared().build()).setUser("fred");
  LockResponse res=client.lock(rqstBuilder.build());
  Assert.assertEquals(1L,res.getLockid());
  Assert.assertEquals(LockState.ACQUIRED,res.getState());
  res=client.checkLock(1);
  Assert.assertEquals(1L,res.getLockid());
  Assert.assertEquals(LockState.ACQUIRED,res.getState());
  client.heartbeat(txnid,1);
  client.commitTxn(txnid);
}
