{
  if (opStack.empty() || nd != opStack.peek()) {
    opStack.push(nd);
  }
  if ((nd.getChildren() == null) || getDispatchedList().containsAll(nd.getChildren())) {
    if (!getDispatchedList().contains(nd)) {
      dispatch(nd,opStack);
    }
    opStack.pop();
    return;
  }
  getToWalk().add(0,nd);
  getToWalk().removeAll(nd.getChildren());
  getToWalk().addAll(0,nd.getChildren());
}
