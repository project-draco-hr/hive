{
  if (vector.isRepeating) {
    row=0;
  }
  if (vector.noNulls || !vector.isNull[row]) {
    List<TypeInfo> childrenTypes=schema.getAllStructFieldTypeInfos();
    StructType result=createStructObject(previous,childrenTypes);
    StructColumnVector struct=(StructColumnVector)vector;
    for (int f=0; f < childrenTypes.size(); ++f) {
      setStructCol(result,f,nextValue(struct.fields[f],row,childrenTypes.get(f),getStructCol(result,f)));
    }
    return result;
  }
 else {
    return null;
  }
}
