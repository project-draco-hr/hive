{
  VectorizationContext vContext=null;
  if (stack.size() <= 1) {
    throw new SemanticException(String.format("Expected operator stack for operator %s to have at least 2 operators",op.getName()));
  }
  int i=stack.size() - 2;
  while (vContext == null) {
    if (i < 0) {
      return null;
    }
    Operator<? extends OperatorDesc> opParent=(Operator<? extends OperatorDesc>)stack.get(i);
    Operator<? extends OperatorDesc> vectorOpParent=opToVectorOpMap.get(opParent);
    if (vectorOpParent != null) {
      if (vectorOpParent instanceof VectorizationContextRegion) {
        VectorizationContextRegion vcRegion=(VectorizationContextRegion)vectorOpParent;
        vContext=vcRegion.getOuputVectorizationContext();
        LOG.info("walkStackToFindVectorizationContext " + vectorOpParent.getName() + " has new vectorization context "+ vContext.toString());
      }
 else {
        LOG.info("walkStackToFindVectorizationContext " + vectorOpParent.getName() + " does not have new vectorization context");
      }
    }
 else {
      LOG.info("walkStackToFindVectorizationContext " + opParent.getName() + " is not vectorized");
    }
    --i;
  }
  return vContext;
}
