{
  if (buf == null || buf.isLockedInHeap)   return Double.MAX_VALUE;
  if (buf.lastUpdate != time) {
    buf.priority=expirePriority(time,buf.lastUpdate,buf.priority);
    buf.lastUpdate=time;
  }
  return buf.priority;
}
