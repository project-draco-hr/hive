{
  try {
    UserGroupInformation newUgi=ShimLoader.getHadoopShims().getUGIForConf(conf);
    String newUserName=ShimLoader.getHadoopShims().getShortUserName(newUgi);
    UserGroupInformation ugiInSession=ShimLoader.getHadoopShims().getUGIForConf(existingSession.getConf());
    String userNameInSession=ShimLoader.getHadoopShims().getShortUserName(ugiInSession);
    return newUserName.equals(userNameInSession);
  }
 catch (  Exception ex) {
    throw new HiveException("Failed to get user info from HiveConf.",ex);
  }
}
