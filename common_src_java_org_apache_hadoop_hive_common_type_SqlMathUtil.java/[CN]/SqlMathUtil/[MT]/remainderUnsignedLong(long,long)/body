{
  if (divisor < 0L) {
    return (compareUnsignedLong(dividend,divisor)) < 0 ? dividend : dividend - divisor;
  }
  if (dividend >= 0L) {
    return dividend % divisor;
  }
 else {
    long quotient=((dividend >>> 1L) / divisor) << 1L;
    long remainder=dividend - quotient * divisor;
    if (compareUnsignedLong(remainder,divisor) >= 0) {
      return remainder - divisor;
    }
    return remainder;
  }
}
