{
  if (destroyed) {
    return;
  }
  destroyed=true;
  if (!hiveLocks.isEmpty()) {
    try {
      releaseLocksAndCommitOrRollback(false,null);
    }
 catch (    LockException e) {
      LOG.warn("Exception when releasing locking in destroy: " + e.getMessage());
    }
    if (shutdownRunner != null) {
      ShutdownHookManager.removeShutdownHook(shutdownRunner);
    }
  }
}
