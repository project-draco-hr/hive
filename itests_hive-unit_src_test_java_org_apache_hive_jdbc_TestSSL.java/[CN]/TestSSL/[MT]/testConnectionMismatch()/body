{
  miniHS2.setConfProperty(ConfVars.HIVE_SERVER2_USE_SSL.varname,"true");
  miniHS2.setConfProperty(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_PASSWORD.varname,"");
  miniHS2.start();
  try {
    hs2Conn=DriverManager.getConnection(miniHS2.getJdbcURL(),System.getProperty("user.name"),"bar");
    fail("NON SSL connection should fail with SSL server");
  }
 catch (  SQLException e) {
    assertEquals("08S01",e.getSQLState().trim());
  }
  try {
    hs2Conn=DriverManager.getConnection(miniHS2.getJdbcURL() + ";ssl=false",System.getProperty("user.name"),"bar");
    fail("NON SSL connection should fail with SSL server");
  }
 catch (  SQLException e) {
    assertEquals("08S01",e.getSQLState().trim());
  }
}
