{
  String javaOpts="";
  long heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",-1,heapSize);
  javaOpts="-Xms1024m";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",-1,heapSize);
  javaOpts="-Xms1024m -Xmx2g";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",2147483648L,heapSize);
  javaOpts="-Xms1024m -Xmx1024m";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",1073741824,heapSize);
  javaOpts="-Xms1024m -Xmx524288k";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",536870912,heapSize);
  javaOpts="-Xms1024m -Xmx1610612736";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",1610612736,heapSize);
  javaOpts="-Xmx1024m -Xmx1536m";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",1610612736,heapSize);
  javaOpts="pre-Xmx1024m";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",-1,heapSize);
  javaOpts="-Xmx1024m-post";
  heapSize=DagUtils.parseRightmostXmx(javaOpts);
  assertEquals("Unexpected maximum heap size",-1,heapSize);
}
