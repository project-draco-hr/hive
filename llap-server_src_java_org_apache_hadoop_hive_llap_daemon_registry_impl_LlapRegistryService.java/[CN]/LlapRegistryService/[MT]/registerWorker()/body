{
  if (this.client != null) {
    String path=getPath();
    ServiceRecord srv=new ServiceRecord();
    srv.addInternalEndpoint(getRpcEndpoint());
    srv.addInternalEndpoint(getShuffleEndpoint());
    for (    Map.Entry<String,String> kv : this.conf) {
      if (kv.getKey().startsWith(LlapDaemonConfiguration.LLAP_DAEMON_PREFIX)) {
        srv.set(kv.getKey(),kv.getValue());
      }
    }
    client.mknode(RegistryPathUtils.parentOf(path),true);
    client.zkCreate(path,CreateMode.EPHEMERAL_SEQUENTIAL,encoder.toBytes(srv),client.getClientAcls());
  }
}
