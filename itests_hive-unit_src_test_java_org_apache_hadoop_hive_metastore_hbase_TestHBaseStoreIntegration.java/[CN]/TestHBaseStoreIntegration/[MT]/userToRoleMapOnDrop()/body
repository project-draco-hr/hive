{
  String roleName1="utrmod1";
  store.addRole(roleName1,"me");
  String roleName2="utrmod2";
  store.addRole(roleName2,"me");
  String user1="pebbles";
  String user2="bam-bam";
  Role role1=store.getRole(roleName1);
  Role role2=store.getRole(roleName2);
  store.grantRole(role1,user1,PrincipalType.USER,"bob",PrincipalType.USER,false);
  store.grantRole(role1,roleName2,PrincipalType.ROLE,"admin",PrincipalType.ROLE,true);
  store.grantRole(role1,user2,PrincipalType.USER,"bob",PrincipalType.USER,false);
  List<String> roles=HBaseReadWrite.getInstance().getUserRoles(user2);
  Assert.assertEquals(2,roles.size());
  String[] roleNames=roles.toArray(new String[roles.size()]);
  Arrays.sort(roleNames);
  Assert.assertArrayEquals(new String[]{roleName1,roleName2},roleNames);
  store.removeRole(roleName2);
  HBaseReadWrite.setConf(conf);
  roles=HBaseReadWrite.getInstance().getUserRoles(user1);
  Assert.assertEquals(1,roles.size());
  Assert.assertEquals(roleName1,roles.get(0));
  roles=HBaseReadWrite.getInstance().getUserRoles(user2);
  Assert.assertEquals(1,roles.size());
  Assert.assertEquals(roleName1,roles.get(0));
}
