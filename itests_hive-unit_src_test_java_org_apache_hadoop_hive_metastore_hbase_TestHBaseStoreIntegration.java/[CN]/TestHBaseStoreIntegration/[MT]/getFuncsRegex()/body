{
  String dbname="default";
  int now=(int)(System.currentTimeMillis() / 1000);
  String[] funcNames=new String[3];
  for (int i=0; i < funcNames.length; i++) {
    funcNames[i]="func" + i;
    store.createFunction(new Function(funcNames[i],dbname,"o.a.h.h.myfunc","me",PrincipalType.USER,now,FunctionType.JAVA,Arrays.asList(new ResourceUri(ResourceType.JAR,"file:/tmp/somewhere"))));
  }
  List<String> funcs=store.getFunctions(dbname,"func1|func2");
  Assert.assertEquals(2,funcs.size());
  String[] namesFromStore=funcs.toArray(new String[2]);
  Arrays.sort(namesFromStore);
  Assert.assertArrayEquals(Arrays.copyOfRange(funcNames,1,3),namesFromStore);
  funcs=store.getFunctions(dbname,"func*");
  Assert.assertEquals(3,funcs.size());
  namesFromStore=funcs.toArray(new String[3]);
  Arrays.sort(namesFromStore);
  Assert.assertArrayEquals(funcNames,namesFromStore);
  funcs=store.getFunctions("nosuchdb","func*");
  Assert.assertEquals(0,funcs.size());
}
