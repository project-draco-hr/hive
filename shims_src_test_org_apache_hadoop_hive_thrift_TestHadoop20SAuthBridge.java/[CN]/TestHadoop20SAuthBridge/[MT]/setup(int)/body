{
  System.setProperty(HiveConf.ConfVars.METASTORE_USE_THRIFT_SASL.varname,"true");
  System.setProperty(HiveConf.ConfVars.METASTOREURIS.varname,"thrift://localhost:" + port);
  System.setProperty(HiveConf.ConfVars.METASTOREWAREHOUSE.varname,new Path(System.getProperty("test.build.data","/tmp")).toString());
  conf=new HiveConf(TestHadoop20SAuthBridge.class);
  conf.setBoolean("hive.metastore.local",false);
  Thread thread=new Thread(new Runnable(){
    public void run(){
      try {
        HiveMetaStore.startMetaStore(port,new MyHadoopThriftAuthBridge20S());
      }
 catch (      Throwable e) {
        System.exit(1);
      }
    }
  }
);
  thread.setDaemon(true);
  thread.start();
  loopUntilHMSReady(port);
}
