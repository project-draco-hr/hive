{
  Thread thread=new Thread(new Runnable(){
    public void run(){
      try {
        HiveMetaStore.startMetaStore(port,new MyHadoopThriftAuthBridge20S());
      }
 catch (      Throwable e) {
        System.exit(1);
      }
    }
  }
);
  thread.setDaemon(true);
  thread.start();
  loopUntilHMSReady();
  UserGroupInformation clientUgi=UserGroupInformation.getCurrentUser();
  obtainTokenAndAddIntoUGI(clientUgi,null);
  obtainTokenAndAddIntoUGI(clientUgi,"tokenForFooTablePartition");
}
