{
  Iterator<Map.Entry<String,String>> it=conf.iterator();
  while (it.hasNext()) {
    Map.Entry<String,String> en=it.next();
    String name=en.getKey();
    String value=conf.get(name);
    name=safeEnvVarName(name);
    boolean truncate=conf.getBoolean(HiveConf.ConfVars.HIVESCRIPTTRUNCATEENV.toString(),false);
    value=safeEnvVarValue(value,name,truncate);
    env.put(name,value);
  }
}
