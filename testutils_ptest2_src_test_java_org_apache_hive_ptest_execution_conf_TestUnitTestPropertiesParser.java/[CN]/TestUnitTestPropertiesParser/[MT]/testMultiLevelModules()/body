{
  File baseDir=getFakeTestBaseDir();
  Context context=getDefaultContext();
  FileListProvider flProvider=getTestFileListProviderMultiLevel(baseDir,4,30,6,9);
  context.put(getUtRootPropertyName(UnitTestPropertiesParser.PROP_BATCH_SIZE),Integer.toString(4));
  context.put(getUtRootPropertyName(UnitTestPropertiesParser.PROP_ONE_MODULE,MODULE1_NAME),MODULE1_NAME);
  context.put(getUtSpecificPropertyName(MODULE1_NAME,UnitTestPropertiesParser.PROP_BATCH_SIZE),Integer.toString(0));
  context.put(getUtRootPropertyName(UnitTestPropertiesParser.PROP_ONE_MODULE,THREE_LEVEL_MODULE1_NAME),THREE_LEVEL_MODULE1_NAME);
  context.put(getUtSpecificPropertyName(THREE_LEVEL_MODULE1_NAME,UnitTestPropertiesParser.PROP_BATCH_SIZE),Integer.toString(0));
  UnitTestPropertiesParser parser=new UnitTestPropertiesParser(context,TEST_CASE_PROPERT_NAME,baseDir,LOG,flProvider,null,true);
  Collection<TestBatch> testBatchCollection=parser.generateTestBatches();
  verifyBatches(testBatchCollection,5,new String[]{UnitTestPropertiesParser.PREFIX_TOP_LEVEL,MODULE1_NAME,TWO_LEVEL_MODULE1_NAME,TWO_LEVEL_MODULE1_NAME,THREE_LEVEL_MODULE1_NAME},new int[]{4,30,4,2,9},new boolean[]{true,true,true,true,true});
}
