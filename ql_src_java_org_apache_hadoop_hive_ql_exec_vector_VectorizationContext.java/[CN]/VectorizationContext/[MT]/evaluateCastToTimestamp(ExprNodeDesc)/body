{
  ExprNodeGenericFuncDesc expr2=(ExprNodeGenericFuncDesc)expr;
  ExprNodeEvaluator evaluator=ExprNodeEvaluatorFactory.get(expr2);
  ObjectInspector output=evaluator.initialize(null);
  Object constant=evaluator.evaluate(null);
  Object java=ObjectInspectorUtils.copyToStandardJavaObject(constant,output);
  if (!(java instanceof Timestamp)) {
    throw new HiveException("Udf: failed to convert to timestamp");
  }
  Timestamp ts=(Timestamp)java;
  long result=ts.getTime();
  result*=1000000;
  result+=ts.getNanos() % 1000000;
  return result;
}
