{
  UserGroupInformation clientUgi=null;
  try {
    clientUgi=shim.createRemoteUser(SessionManager.getUserName(),new ArrayList<String>());
    return shim.doAs(clientUgi,new PrivilegedExceptionAction<Boolean>(){
      @Override public Boolean run(){
        try {
          return underlyingProcessor.process(in,out);
        }
 catch (        TException te) {
          throw new RuntimeException(te);
        }
      }
    }
);
  }
 catch (  RuntimeException rte) {
    if (rte.getCause() instanceof TException) {
      throw (TException)rte.getCause();
    }
    throw rte;
  }
catch (  InterruptedException ie) {
    throw new RuntimeException(ie);
  }
catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
}
