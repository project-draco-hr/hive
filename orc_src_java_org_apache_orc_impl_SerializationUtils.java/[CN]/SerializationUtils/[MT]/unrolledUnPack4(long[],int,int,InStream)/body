{
  final int numHops=2;
  final int remainder=len % numHops;
  final int endOffset=offset + len;
  final int endUnroll=endOffset - remainder;
  int val=0;
  for (int i=offset; i < endUnroll; i=i + numHops) {
    val=input.read();
    buffer[i]=(val >>> 4) & 15;
    buffer[i + 1]=val & 15;
  }
  if (remainder > 0) {
    int startShift=4;
    val=input.read();
    for (int i=endUnroll; i < endOffset; i++) {
      buffer[i]=(val >>> startShift) & 15;
      startShift-=4;
    }
  }
}
