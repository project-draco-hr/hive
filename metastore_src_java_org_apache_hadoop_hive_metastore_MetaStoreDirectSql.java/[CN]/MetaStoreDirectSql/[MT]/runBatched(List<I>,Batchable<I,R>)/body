{
  if (batchSize == NO_BATCHING || batchSize >= input.size()) {
    return runnable.run(input);
  }
  List<R> result=new ArrayList<R>(input.size());
  for (int fromIndex=0, toIndex=0; toIndex < input.size(); fromIndex=toIndex) {
    toIndex=Math.min(fromIndex + batchSize,input.size());
    List<I> batchedInput=input.subList(fromIndex,toIndex);
    List<R> batchedOutput=runnable.run(batchedInput);
    if (batchedOutput != null) {
      result.addAll(batchedOutput);
    }
  }
  return result;
}
