{
  String prop_string="";
  if (!props.isEmpty()) {
    Map<String,String> properties=new TreeMap<String,String>(props);
    List<String> realProps=new ArrayList<String>();
    for (    String key : properties.keySet()) {
      if (properties.get(key) != null && (exclude == null || !exclude.contains(key))) {
        realProps.add("  '" + key + "'='"+ escapeHiveCommand(StringEscapeUtils.escapeJava(properties.get(key)))+ "'");
      }
    }
    prop_string+=StringUtils.join(realProps,", \n");
  }
  return prop_string;
}
