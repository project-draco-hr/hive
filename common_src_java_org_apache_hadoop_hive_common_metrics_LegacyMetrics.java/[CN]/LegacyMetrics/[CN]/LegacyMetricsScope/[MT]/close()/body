{
  if (isOpen) {
    Long endTime=System.currentTimeMillis();
synchronized (metrics) {
      Long num=metrics.incrementCounter(numCounter);
      Long time=metrics.incrementCounter(timeCounter,endTime - startTime);
      if (num != null && time != null) {
        metrics.set(avgTimeCounter,Double.valueOf(time.doubleValue() / num.doubleValue()));
      }
    }
  }
 else {
    throw new IOException("Scope named " + name + " is not open, cannot be closed.");
  }
  isOpen=false;
}
