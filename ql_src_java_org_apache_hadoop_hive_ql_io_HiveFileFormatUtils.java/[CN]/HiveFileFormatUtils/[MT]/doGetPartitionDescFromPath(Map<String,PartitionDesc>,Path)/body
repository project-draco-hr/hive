{
  String dirPath=dir.toUri().getPath();
  PartitionDesc part=pathToPartitionInfo.get(dir.toString());
  if (part == null) {
    part=pathToPartitionInfo.get(dirPath);
  }
  if (part == null) {
    String dirStr=dir.toString();
    int dirPathIndex=dirPath.lastIndexOf(Path.SEPARATOR);
    int dirStrIndex=dirStr.lastIndexOf(Path.SEPARATOR);
    while (dirPathIndex >= 0 && dirStrIndex >= 0) {
      dirStr=dirStr.substring(0,dirStrIndex);
      dirPath=dirPath.substring(0,dirPathIndex);
      part=pathToPartitionInfo.get(dirStr);
      if (part == null) {
        part=pathToPartitionInfo.get(dirPath);
      }
      if (part != null) {
        break;
      }
      dirPathIndex=dirPath.lastIndexOf(Path.SEPARATOR);
      dirStrIndex=dirStr.lastIndexOf(Path.SEPARATOR);
    }
  }
  return part;
}
