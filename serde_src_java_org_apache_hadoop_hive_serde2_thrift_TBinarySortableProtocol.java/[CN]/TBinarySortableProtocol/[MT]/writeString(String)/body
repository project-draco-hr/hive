{
  byte[] dat;
  try {
    dat=str.getBytes("UTF-8");
  }
 catch (  UnsupportedEncodingException uex) {
    throw new TException("JVM DOES NOT SUPPORT UTF-8: " + uex.getMessage());
  }
  for (int i=0; i < str.length(); i++) {
    if (str.charAt(i) == '\0') {
      throw new TException(getClass().getName() + " does not support serializing strings with null bytes!");
    }
  }
  writeRawBytes(nonNullByte,0,1);
  writeRawBytes(dat,0,dat.length);
  writeRawBytes(nullByte,0,1);
}
