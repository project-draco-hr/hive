{
  String wStr;
  if (datanucleusFormat) {
    wStr="*";
  }
 else {
    wStr=".*";
  }
  return pattern.replaceAll("([^\\\\])%","$1" + wStr).replaceAll("\\\\%","%").replaceAll("^%",wStr).replaceAll("([^\\\\])_","$1.").replaceAll("\\\\_","_").replaceAll("^_",".");
}
