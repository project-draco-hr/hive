{
  hs2Conn=DriverManager.getConnection(miniHS2.getBaseJdbcURL() + "default;user=" + SASL_NONKRB_USER1+ ";password="+ SASL_NONKRB_PWD);
  verifyProperty(SESSION_USER_NAME,SASL_NONKRB_USER1);
  try {
    String token=((HiveConnection)hs2Conn).getDelegationToken(MiniHiveKdc.HIVE_TEST_USER_1,MiniHiveKdc.HIVE_SERVICE_PRINCIPAL);
    fail(SASL_NONKRB_USER1 + " shouldn't be allowed to retrieve token for " + MiniHiveKdc.HIVE_TEST_USER_2);
  }
 catch (  SQLException e) {
    assertTrue(e.getMessage().contains("Delegation token only supported over remote client with kerberos authentication"));
  }
 finally {
    hs2Conn.close();
  }
}
