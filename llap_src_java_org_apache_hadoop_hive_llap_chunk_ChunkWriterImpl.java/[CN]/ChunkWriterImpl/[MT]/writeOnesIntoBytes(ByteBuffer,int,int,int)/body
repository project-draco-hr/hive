{
  int nextByteToModify=bitmaskOffset + (valuesSinceBitmask >>> 3);
  int bitsWritten=writeOneBitsFromPartialByte(buffer,nextByteToModify,valuesSinceBitmask,valuesToWrite);
  if (bitsWritten > 0) {
    valuesToWrite-=bitsWritten;
    ++nextByteToModify;
  }
  while (valuesToWrite > 8) {
    buffer.put(nextByteToModify,(byte)0xff);
    valuesToWrite-=8;
    ++nextByteToModify;
  }
  if (valuesToWrite > 0) {
    int newBitsMask=((1 << valuesToWrite) - 1) << (8 - valuesToWrite);
    buffer.put(nextByteToModify,(byte)newBitsMask);
  }
}
