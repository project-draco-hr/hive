{
  long[] bitSet=bloom.getBitSet();
  List<Long> bits=new ArrayList<>(bitSet.length);
  for (int i=0; i < bitSet.length; i++)   bits.add(bitSet[i]);
  HbaseMetastoreProto.AggrStatsBloomFilter.BloomFilter protoBloom=HbaseMetastoreProto.AggrStatsBloomFilter.BloomFilter.newBuilder().setNumBits(bloom.getBitSize()).setNumFuncs(bloom.getNumHashFunctions()).addAllBits(bits).build();
  HbaseMetastoreProto.AggrStatsBloomFilter proto=HbaseMetastoreProto.AggrStatsBloomFilter.newBuilder().setDbName(ByteString.copyFrom(dbName.getBytes(ENCODING))).setTableName(ByteString.copyFrom(tableName.getBytes(ENCODING))).setBloomFilter(protoBloom).setAggregatedAt(System.currentTimeMillis()).build();
  return proto.toByteArray();
}
