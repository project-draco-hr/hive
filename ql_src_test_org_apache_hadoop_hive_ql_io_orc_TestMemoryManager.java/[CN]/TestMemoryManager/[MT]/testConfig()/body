{
  Configuration conf=new Configuration();
  conf.set("hive.exec.orc.memory.pool","0.9");
  MemoryManager mgr=new MemoryManager(conf);
  long mem=ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getMax();
  System.err.print("Memory = " + mem);
  long pool=mgr.getTotalMemoryPool();
  assertTrue("Pool too small: " + pool,mem * 0.899 < pool);
  assertTrue("Pool too big: " + pool,pool < mem * 0.901);
}
