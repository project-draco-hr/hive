{
  final DelegationTokenIdentifier id=getTokenIdentifier(token);
  DelegationTokenInformation tokenInfo=this.tokenStore.getToken(id);
  if (tokenInfo == null) {
    throw new InvalidToken("token does not exist: " + id);
  }
  if (!super.allKeys.containsKey(id.getMasterKeyId())) {
    LOGGER.info("Unknown master key (id={}), (re)loading keys from token store.",id.getMasterKeyId());
    reloadKeys();
  }
synchronized (this) {
    super.currentTokens.put(id,tokenInfo);
    try {
      return super.renewToken(token,renewer);
    }
  finally {
      super.currentTokens.remove(id);
    }
  }
}
