{
  Location retval=null;
  PageCursor curs=new PageCursor(pageman,Magic.FREELOGIDS_PAGE);
  while (curs.next() != 0) {
    FreeLogicalRowIdPage fp=FreeLogicalRowIdPage.getFreeLogicalRowIdPageView(file.get(curs.getCurrent()));
    int slot=fp.getFirstAllocated();
    if (slot != -1) {
      retval=new Location(fp.get(slot));
      fp.free(slot);
      if (fp.getCount() == 0) {
        file.release(curs.getCurrent(),false);
        pageman.free(Magic.FREELOGIDS_PAGE,curs.getCurrent());
      }
 else {
        file.release(curs.getCurrent(),true);
      }
      return retval;
    }
 else {
      file.release(curs.getCurrent(),false);
    }
  }
  return null;
}
