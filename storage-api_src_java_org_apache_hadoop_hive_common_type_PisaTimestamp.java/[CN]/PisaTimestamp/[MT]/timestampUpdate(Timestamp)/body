{
  long epochSeconds=epochDay * SECONDS_PER_DAY + nanoOfDay / NANOSECONDS_PER_SECOND;
  long integralSecInMillis;
  int nanos=(int)(nanoOfDay % NANOSECONDS_PER_SECOND);
  if (nanos < 0) {
    nanos=(int)NANOSECONDS_PER_SECOND + nanos;
    integralSecInMillis=(epochSeconds - 1) * MILLISECONDS_PER_SECOND;
  }
 else {
    integralSecInMillis=epochSeconds * MILLISECONDS_PER_SECOND;
  }
  timestamp.setTime(integralSecInMillis);
  timestamp.setNanos(nanos);
}
