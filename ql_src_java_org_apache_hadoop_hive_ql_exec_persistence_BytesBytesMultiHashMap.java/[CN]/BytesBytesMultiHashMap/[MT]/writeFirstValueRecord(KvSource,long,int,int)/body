{
  long valueOffset=writeBuffers.getWritePoint();
  kv.writeValue(writeBuffers);
  long tailOffset=writeBuffers.getWritePoint();
  int valueLength=(int)(tailOffset - valueOffset);
  if (tailOffset == 0) {
    writeBuffers.reserve(1);
    ++tailOffset;
  }
  writeBuffers.writeVLong(valueLength);
  writeBuffers.writeVLong(keyLength);
  long lengthsLength=writeBuffers.getWritePoint() - tailOffset;
  if (lengthsLength < 5) {
    writeBuffers.reserve(5 - (int)lengthsLength);
  }
  writeBuffers.writeInt(keyOffset - 4,hashCode);
  return tailOffset;
}
