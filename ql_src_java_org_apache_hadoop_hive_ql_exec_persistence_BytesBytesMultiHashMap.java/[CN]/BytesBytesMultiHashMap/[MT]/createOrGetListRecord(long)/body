{
  if (Ref.hasList(ref)) {
    return writeBuffers.getUnsafeReadPoint();
  }
  long firstTailOffset=Ref.getOffset(ref);
  writeBuffers.setUnsafeReadPoint(firstTailOffset);
  writeBuffers.unsafeSkipVLong();
  writeBuffers.unsafeSkipVLong();
  int lengthsLength=(int)(writeBuffers.getUnsafeReadPoint() - firstTailOffset);
  writeBuffers.writeBytes(firstTailOffset,lengthsLength);
  long lrPtrOffset=writeBuffers.getWritePoint();
  writeBuffers.write(FIVE_ZEROES);
  writeBuffers.writeFiveByteULong(firstTailOffset,lrPtrOffset - lengthsLength - firstTailOffset);
  return lrPtrOffset;
}
