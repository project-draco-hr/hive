{
  if (loadFactor < 0 || loadFactor > 1) {
    throw new AssertionError("Load factor must be between (0, 1].");
  }
  initialCapacity=(Long.bitCount(initialCapacity) == 1) ? initialCapacity : nextHighestPowerOfTwo(initialCapacity);
  validateCapacity(initialCapacity);
  startingHashBitCount=63 - Long.numberOfLeadingZeros(initialCapacity);
  this.loadFactor=loadFactor;
  refs=new long[initialCapacity];
  writeBuffers=new WriteBuffers(wbSize,MAX_WB_SIZE);
  resizeThreshold=(int)(initialCapacity * this.loadFactor);
}
