{
  if (root.children != null) {
    int size=root.children.size();
    for (int i=0; i < size; ++i) {
      root.children.set(i,convertToCNF(root.children.get(i)));
    }
    if (root.operator == ExpressionTree.Operator.OR) {
      List<ExpressionTree> nonAndList=new ArrayList<ExpressionTree>();
      List<ExpressionTree> andList=new ArrayList<ExpressionTree>();
      for (      ExpressionTree child : root.children) {
        if (child.operator == ExpressionTree.Operator.AND) {
          andList.add(child);
        }
 else         if (child.operator == ExpressionTree.Operator.OR) {
          for (          ExpressionTree grandkid : child.children) {
            nonAndList.add(grandkid);
          }
        }
 else {
          nonAndList.add(child);
        }
      }
      if (!andList.isEmpty()) {
        root=new ExpressionTree(ExpressionTree.Operator.AND);
        generateAllCombinations(root.children,andList,nonAndList);
      }
    }
  }
  return root;
}
