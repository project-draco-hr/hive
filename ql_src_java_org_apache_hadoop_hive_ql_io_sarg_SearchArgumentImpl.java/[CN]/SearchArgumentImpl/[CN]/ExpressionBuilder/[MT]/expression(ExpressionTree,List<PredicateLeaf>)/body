{
  expr=pushDownNot(expr);
  expr=foldMaybe(expr);
  expr=flatten(expr);
  expr=convertToCNF(expr);
  expr=flatten(expr);
  expr=buildLeafList(expr,leaves,new HashMap<PredicateLeaf,ExpressionTree>());
  return expr;
}
