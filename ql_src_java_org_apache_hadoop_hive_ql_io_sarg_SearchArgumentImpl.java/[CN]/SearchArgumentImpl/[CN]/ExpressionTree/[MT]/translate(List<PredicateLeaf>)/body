{
  FilterPredicate p=null;
switch (operator) {
case OR:
    for (    ExpressionTree child : children) {
      if (p == null) {
        p=child.translate(leafs);
      }
 else {
        FilterPredicate right=child.translate(leafs);
        if (right != null) {
          p=FilterApi.or(p,right);
        }
      }
    }
  return p;
case AND:
for (ExpressionTree child : children) {
  if (p == null) {
    p=child.translate(leafs);
  }
 else {
    FilterPredicate right=child.translate(leafs);
    if (right != null) {
      p=FilterApi.and(p,right);
    }
  }
}
return p;
case NOT:
FilterPredicate op=children.get(0).translate(leafs);
if (op != null) {
return FilterApi.not(op);
}
 else {
return null;
}
case LEAF:
return buildFilterPredicateFromPredicateLeaf(leafs.get(leaf));
case CONSTANT:
return null;
default :
throw new IllegalStateException("Unknown operator: " + operator);
}
}
