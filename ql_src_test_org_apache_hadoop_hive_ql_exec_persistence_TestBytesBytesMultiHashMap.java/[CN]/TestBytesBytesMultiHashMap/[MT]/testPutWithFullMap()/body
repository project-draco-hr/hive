{
  BytesBytesMultiHashMap map=new BytesBytesMultiHashMap(CAPACITY,1f,WB_SIZE);
  UniqueKeysKvSource kv=new UniqueKeysKvSource();
  for (int i=0; i < CAPACITY; ++i) {
    map.put(kv,-1);
  }
  for (int i=0; i < kv.keys.size(); ++i) {
    verifyResults(map,kv.keys.get(i),kv.values.get(i));
  }
  assertEquals(CAPACITY,map.getCapacity());
  List<WriteBuffers.ByteSegmentRef> results=new ArrayList<WriteBuffers.ByteSegmentRef>(0);
  map.getValueRefs(new byte[0],0,results);
  assertTrue(results.isEmpty());
}
