{
  List<WriteBuffers.ByteSegmentRef> results=new ArrayList<WriteBuffers.ByteSegmentRef>(0);
  byte state=map.getValueRefs(key,key.length,results);
  assertEquals(state,results.size());
  assertEquals(values.length,results.size());
  HashSet<ByteBuffer> hs=new HashSet<ByteBuffer>();
  for (int i=0; i < results.size(); ++i) {
    WriteBuffers.ByteSegmentRef result=results.get(i);
    map.populateValue(result);
    hs.add(result.copy());
  }
  for (int i=0; i < values.length; ++i) {
    assertTrue(hs.contains(ByteBuffer.wrap(values[i])));
  }
}
