{
  BytesBytesMultiHashMap.Result hashMapResult=new BytesBytesMultiHashMap.Result();
  byte state=map.getValueResult(key,0,key.length,hashMapResult);
  HashSet<ByteBuffer> hs=new HashSet<ByteBuffer>();
  int count=0;
  if (hashMapResult.hasRows()) {
    WriteBuffers.ByteSegmentRef ref=hashMapResult.first();
    while (ref != null) {
      count++;
      hs.add(ref.copy());
      ref=hashMapResult.next();
    }
  }
  assertEquals(state,count);
  assertEquals(values.length,count);
  for (int i=0; i < values.length; ++i) {
    assertTrue(hs.contains(ByteBuffer.wrap(values[i])));
  }
}
