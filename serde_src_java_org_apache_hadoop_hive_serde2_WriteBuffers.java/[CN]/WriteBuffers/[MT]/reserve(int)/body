{
  if (byteCount < 0)   throw new AssertionError("byteCount must be non-negative");
  int currentWriteOffset=this.currentWriteOffset + byteCount;
  while (currentWriteOffset > wbSize) {
    nextBufferToWrite();
    currentWriteOffset-=wbSize;
  }
  this.currentWriteOffset=currentWriteOffset;
}
