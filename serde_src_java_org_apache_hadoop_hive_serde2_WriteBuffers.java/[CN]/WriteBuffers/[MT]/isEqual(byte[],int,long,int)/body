{
  if (rightLength != leftLength) {
    return false;
  }
  int rightIndex=getBufferIndex(rightOffset), rightFrom=getOffset(rightOffset);
  byte[] rightBuffer=writeBuffers.get(rightIndex);
  if (rightFrom + rightLength <= wbSize) {
    for (int i=0; i < leftLength; ++i) {
      if (left[i] != rightBuffer[rightFrom + i]) {
        return false;
      }
    }
    return true;
  }
  for (int i=0; i < rightLength; ++i) {
    if (rightFrom == wbSize) {
      ++rightIndex;
      rightBuffer=writeBuffers.get(rightIndex);
      rightFrom=0;
    }
    if (left[i] != rightBuffer[rightFrom++]) {
      return false;
    }
  }
  return true;
}
