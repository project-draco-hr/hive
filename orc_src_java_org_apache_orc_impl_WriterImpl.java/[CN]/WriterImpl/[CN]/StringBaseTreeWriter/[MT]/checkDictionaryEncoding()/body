{
  if (!doneDictionaryCheck) {
    float ratio=rows.size() > 0 ? (float)(dictionary.size()) / rows.size() : 0.0f;
    useDictionaryEncoding=!isDirectV2 || ratio <= dictionaryKeySizeThreshold;
    doneDictionaryCheck=true;
  }
  return useDictionaryEncoding;
}
