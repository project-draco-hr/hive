{
  inputSplitShim.write(out);
  if (inputFormatClassName == null) {
    Map<String,PartitionDesc> pathToPartitionInfo=Utilities.getMapRedWork(getJob()).getPathToPartitionInfo();
    PartitionDesc part=null;
    try {
      part=getPartitionDescFromPath(pathToPartitionInfo,inputSplitShim.getPath(0).getParent());
    }
 catch (    IOException e) {
      part=null;
    }
    if (part == null) {
      part=getPartitionDescFromPath(pathToPartitionInfo,inputSplitShim.getPath(0));
    }
    inputFormatClassName=part.getInputFileFormatClass().getName();
  }
  out.writeUTF(inputFormatClassName);
}
