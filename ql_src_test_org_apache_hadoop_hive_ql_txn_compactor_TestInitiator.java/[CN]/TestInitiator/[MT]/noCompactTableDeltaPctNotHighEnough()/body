{
  Table t=newTable("default","nctdpnhe",false);
  HiveConf conf=new HiveConf();
  addBaseFile(conf,t,null,50L,50);
  addDeltaFile(conf,t,null,21L,22L,2);
  addDeltaFile(conf,t,null,23L,24L,2);
  burnThroughTransactions(53);
  long txnid=openTxn();
  LockComponent comp=new LockComponent(LockType.SHARED_WRITE,LockLevel.TABLE,"default");
  comp.setTablename("nctdpnhe");
  List<LockComponent> components=new ArrayList<LockComponent>(1);
  components.add(comp);
  LockRequest req=new LockRequest(components,"me","localhost");
  req.setTxnid(txnid);
  LockResponse res=txnHandler.lock(req);
  txnHandler.commitTxn(new CommitTxnRequest(txnid));
  startInitiator(conf);
  ShowCompactResponse rsp=txnHandler.showCompact(new ShowCompactRequest());
  Assert.assertNull(rsp.getCompacts());
}
