{
  Throwable first=(semanticException != null) ? semanticException : e, current=first, cause=current.getCause();
  while (cause != null) {
    Throwable causeOfCause=cause.getCause();
    if (current == first && causeOfCause == null && isUselessCause(first)) {
      first=cause;
      break;
    }
 else     if (causeOfCause != null && isUselessCause(cause) && ExceptionHelper.resetCause(current,causeOfCause)) {
      cause=causeOfCause;
      continue;
    }
    current=cause;
    cause=current.getCause();
  }
  if (first instanceof RuntimeException) {
    throw (RuntimeException)first;
  }
 else   if (first instanceof SemanticException) {
    throw (SemanticException)first;
  }
  throw new RuntimeException(first);
}
