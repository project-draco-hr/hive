{
  if (cmd == null) {
    return;
  }
  UserGroupInformation ugi;
  try {
    ugi=Utils.getUGI();
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex);
  }
  final Formatter fmt=auditFormatter.get();
  ((StringBuilder)fmt.out()).setLength(0);
  String address=null;
  if (useSasl) {
    if (saslServer != null && saslServer.getRemoteAddress() != null) {
      address=String.valueOf(saslServer.getRemoteAddress());
    }
  }
 else {
    address=getIpAddress();
  }
  if (address == null) {
    address="unknown-ip-addr";
  }
  auditLog.info(fmt.format(AUDIT_FORMAT,ugi.getUserName(),address,cmd).toString());
}
