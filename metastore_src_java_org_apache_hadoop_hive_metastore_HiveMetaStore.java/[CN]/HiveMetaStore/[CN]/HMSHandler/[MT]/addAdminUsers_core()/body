{
  String userStr=HiveConf.getVar(hiveConf,ConfVars.USERS_IN_ADMIN_ROLE,"").trim();
  if (userStr.isEmpty()) {
    LOG.info("No user is added in admin role, since config is empty");
    return;
  }
  Iterator<String> users=Splitter.on(",").trimResults().omitEmptyStrings().split(userStr).iterator();
  if (!users.hasNext()) {
    LOG.info("No user is added in admin role, since config value " + userStr + " is in incorrect format. We accept comma seprated list of users.");
    return;
  }
  Role adminRole;
  RawStore ms=getMS();
  try {
    adminRole=ms.getRole(ADMIN);
  }
 catch (  NoSuchObjectException e) {
    LOG.error("Failed to retrieve just added admin role",e);
    return;
  }
  while (users.hasNext()) {
    String userName=users.next();
    try {
      ms.grantRole(adminRole,userName,PrincipalType.USER,ADMIN,PrincipalType.ROLE,true);
      LOG.info("Added " + userName + " to admin role");
    }
 catch (    NoSuchObjectException e) {
      LOG.error("Failed to add " + userName + " in admin role",e);
    }
catch (    InvalidObjectException e) {
      LOG.debug(userName + " already in admin role",e);
    }
  }
}
