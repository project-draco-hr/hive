{
  Properties urlProps=(defaults != null) ? new Properties(defaults) : new Properties();
  if (url == null || !url.startsWith(URL_PREFIX)) {
    throw new SQLException("Invalid connection url: " + url);
  }
  if (url.length() <= URL_PREFIX.length()) {
    return urlProps;
  }
  String connectionInfo=url.substring(URL_PREFIX.length());
  String[] hostPortAndDatabase=connectionInfo.split("/",2);
  if (hostPortAndDatabase[0].length() > 0) {
    String[] hostAndPort=hostPortAndDatabase[0].split(":",2);
    urlProps.put(HOST_PROPERTY_KEY,hostAndPort[0]);
    if (hostAndPort.length > 1) {
      urlProps.put(PORT_PROPERTY_KEY,hostAndPort[1]);
    }
 else {
      urlProps.put(PORT_PROPERTY_KEY,DEFAULT_PORT);
    }
  }
  if (hostPortAndDatabase.length > 1) {
    urlProps.put(DBNAME_PROPERTY_KEY,hostPortAndDatabase[1]);
  }
  return urlProps;
}
