{
  int memory=0;
  int vcores=0;
  readLock.lock();
  try {
    int numInstancesFound=0;
    for (    ServiceInstance inst : activeInstances.getAll().values()) {
      if (inst.isAlive()) {
        Resource r=inst.getResource();
        memory+=r.getMemory();
        vcores+=r.getVirtualCores();
        numInstancesFound++;
      }
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("GetTotalResources: numInstancesFound={}, totalMem={}, totalVcores={}",numInstancesFound,memory,vcores);
    }
  }
  finally {
    readLock.unlock();
  }
  return Resource.newInstance(memory,vcores);
}
