{
  int memory=0;
  int vcores=0;
  readLock.lock();
  try {
    for (    Entry<ServiceInstance,NodeInfo> entry : instanceToNodeMap.entrySet()) {
      if (entry.getKey().isAlive() && !entry.getValue().isDisabled()) {
        Resource r=entry.getKey().getResource();
        memory+=r.getMemory();
        vcores+=r.getVirtualCores();
      }
    }
  }
  finally {
    readLock.unlock();
  }
  return Resource.newInstance(memory,vcores);
}
