{
  if (sessionConf.get(CONFIG_AUTHZ_SETTINGS_APPLIED_MARKER,"").equals(Boolean.TRUE.toString())) {
    return;
  }
  String metastoreHook=sessionConf.get(ConfVars.METASTORE_FILTER_HOOK.name());
  if (!ConfVars.METASTORE_FILTER_HOOK.getDefaultValue().equals(metastoreHook) && !AuthorizationMetaStoreFilterHook.class.getName().equals(metastoreHook)) {
    LOG.warn(ConfVars.METASTORE_FILTER_HOOK.name() + " will be ignored, since hive.security.authorization.manager" + " is set to instance of HiveAuthorizerFactory.");
  }
  sessionConf.setVar(ConfVars.METASTORE_FILTER_HOOK,AuthorizationMetaStoreFilterHook.class.getName());
  authorizerV2.applyAuthorizationConfigPolicy(sessionConf);
  try {
    Hive.get(sessionConf).getMSC();
  }
 catch (  Exception e) {
    throw new HiveException(e.getMessage(),e);
  }
  sessionConf.set(CONFIG_AUTHZ_SETTINGS_APPLIED_MARKER,Boolean.TRUE.toString());
}
