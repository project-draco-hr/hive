{
  this.sessionConf=conf;
  this.userName=userName;
  if (LOG.isDebugEnabled()) {
    LOG.debug("SessionState user: " + userName);
  }
  isSilent=conf.getBoolVar(HiveConf.ConfVars.HIVESESSIONSILENT);
  ls=new LineageState();
  resourceMaps=new ResourceMaps();
  overriddenConfigurations=new LinkedHashMap<String,String>();
  overriddenConfigurations.putAll(HiveConf.getConfSystemProperties());
  if (StringUtils.isEmpty(conf.getVar(HiveConf.ConfVars.HIVESESSIONID))) {
    conf.setVar(HiveConf.ConfVars.HIVESESSIONID,makeSessionId());
  }
  parentLoader=SessionState.class.getClassLoader();
  final ClassLoader currentLoader=Utilities.createUDFClassLoader((URLClassLoader)parentLoader,new String[]{});
  this.sessionConf.setClassLoader(currentLoader);
  resourceDownloader=new ResourceDownloader(conf,HiveConf.getVar(conf,ConfVars.DOWNLOADED_RESOURCES_DIR));
}
