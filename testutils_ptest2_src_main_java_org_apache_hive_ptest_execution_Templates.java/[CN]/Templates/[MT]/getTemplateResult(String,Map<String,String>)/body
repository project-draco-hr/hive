{
  VelocityContext context=new VelocityContext();
  for (  String key : keyValues.keySet()) {
    context.put(key,keyValues.get(key));
  }
  StringWriter writer=new StringWriter();
  if (!Velocity.evaluate(context,writer,command,command)) {
    throw new IOException("Unable to render " + command + " with "+ keyValues);
  }
  writer.close();
  return writer.toString();
}
