{
  long start=System.currentTimeMillis();
  URL llap_l4j2=LlapDaemon.class.getClassLoader().getResource(LlapConstants.LOG4j2_PROPERTIES_FILE);
  if (llap_l4j2 != null) {
    final boolean async=LogUtils.checkAndSetAsyncLogging(conf);
    System.setProperty("isThreadContextMapInheritable","true");
    Configurator.initialize("LlapDaemonLog4j2",llap_l4j2.toString());
    long end=System.currentTimeMillis();
    LOG.warn("LLAP daemon logging initialized from {} in {} ms. Async: {}",llap_l4j2,(end - start),async);
  }
 else {
    throw new RuntimeException("Log initialization failed." + " Unable to locate " + LlapConstants.LOG4j2_PROPERTIES_FILE + " file in classpath");
  }
}
